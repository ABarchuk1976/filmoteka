var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},c=e.parcelRequired7c6;null==c&&((c=function(e){if(e in t)return t[e].exports;if(e in n){var c=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,c.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequired7c6=c),c("7bYU0"),c("jLhJV"),c("9dykO"),c("37v9V");var s=c("b5rV1"),a=c("fQE3M"),i=c("9dykO");const o={gallery:document.querySelector(".js-gallery-library"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue"),activLibraryBtn:document.querySelector(".filter__item>.filter__button--active")},r=new(0,a.default);function d(){r.close(),o.closeBtn.removeEventListener("click",d),window.removeEventListener("keydown",l),window.location.reload()}function l(e){"Escape"===e.code&&(r.close(),o.closeBtn.removeEventListener("click",d),window.removeEventListener("keydown",l))}o.gallery.addEventListener("click",(function(e){if(e.preventDefault(),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,s.load("QueueMovies").concat(s.load("WatchedMovies")).find((e=>e.id===Number(n))));var n;r.modifyDataFilm(t),r.open(),o.btnWatched.addEventListener("click",(function(){o.btnWatched.classList.contains("watched_send")?(o.btnWatched.textContent="REMOVE FROM WATCHED",o.btnWatched.classList.replace("watched_send","watched_remove"),(0,i.sendWatchedToStorage)()):o.btnWatched.classList.contains("watched_remove")&&(o.btnWatched.textContent="ADD TO WATCHED",o.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),c=n.findIndex((t=>t.id===e.id));n.splice(c,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));o.btnWatched.textContent="ADD TO WATCHED",o.btnWatched.classList.replace("watched_remove","watched_send")})),o.btnQueue.addEventListener("click",(function(){o.btnQueue.classList.contains("queue_send")?(o.btnQueue.textContent="REMOVE FROM QUEUE",o.btnQueue.classList.replace("queue_send","queue_remove"),(0,i.sendQueueToStorage)()):o.btnQueue.classList.contains("queue_remove")&&(o.btnQueue.textContent="ADD TO QUEUE",o.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),c=n.findIndex((t=>t.id===e.id));n.splice(c,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));o.btnQueue.textContent="ADD TO QUEUE",o.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(o.btnWatched.classList.replace("watched_send","watched_remove"),o.btnWatched.textContent="REMOVE FROM WATCHED"):(o.btnWatched.classList.replace("watched_remove","watched_send"),o.btnWatched.textContent="ADD TO WATCHED")}catch(e){o.btnWatched.classList.replace("watched_remove","watched_send")}}(t),o.btnWatched.classList.contains("watched_remove")?o.btnWatched.textContent="REMOVE FROM WATCHED":o.btnWatched.classList.contains("watched_send")&&(o.btnWatched.textContent="ADD TO WATCHED");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(o.btnQueue.classList.replace("queue_send","queue_remove"),o.btnQueue.textContent="REMOVE FROM QUEUE"):(o.btnQueue.classList.replace("queue_remove","queue_send"),o.btnQueue.textContent="ADD TO QUEUE")}catch(e){o.btnQueue.classList.replace("queue_remove","queue_send")}})(t),o.btnQueue.classList.contains("queue_remove")?o.btnQueue.textContent="REMOVE FROM QUEUE":o.btnWatched.classList.contains("queue_send")&&(o.btnQueue.textContent="ADD TO QUEUE");o.closeBtn.addEventListener("click",d),window.addEventListener("keydown",l)})),o.closeBtn.addEventListener("click",d),window.addEventListener("keydown",l),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&d()}));var u=c("7EEHk");let h=1,m=[],v=1;const b=document.querySelector(".filter__item-queue"),f=document.querySelector(".filter__item-watched"),E=document.querySelector(".js-pagination-library"),g=document.querySelector(".empty-list"),L=document.querySelector(".empty-title"),_=document.querySelector(".js-gallery-library");function w(e){const t=e.target;h=t.classList.contains("filter__item-queue")?1:0,v=1;let n=h?"QueueMovies":"WatchedMovies";h?(b.classList.add("active"),f.classList.remove("active")):(f.classList.add("active"),b.classList.remove("active"));try{if(m.length=0,m=[...y(n)],!m||!m.length)throw"Your film list is empty";(0,u.renderFilmCards)(m[v-1],_),(0,u.renderPagination)(v,m.length,E),g.classList.add("is-hidden")}catch(e){g.classList.remove("is-hidden"),L.textContent="Your film list is empty"}}function y(e){try{let t=localStorage.getItem(e);if(t){t=JSON.parse(t);const e=[];for(let n=0;n<t.length;n+=6){let c=n+6<t.length?n+6:t.length;e.push(t.slice(n,c))}return e}}catch(e){console.log(e.message)}}window.addEventListener("load",(()=>{b.click(),v=1})),b.addEventListener("click",w),f.addEventListener("click",w),E.addEventListener("click",(function(e){const t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(v-=1);t.classList.contains("js-pagination__arrow-right")&&(v+=1);t.classList.contains("js-pagination__button")&&(v=Number(t.textContent));try{if(!m||!m.length)throw"Your film list is empty";(0,u.renderFilmCards)(m[v-1],_),(0,u.renderPagination)(v,m.length,E),g.classList.add("is-hidden")}catch(e){g.classList.remove("is-hidden"),L.textContent=e.message}}));
//# sourceMappingURL=library.af73cb48.js.map
