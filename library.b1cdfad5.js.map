{"mappings":"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","sources":["src/library.js","src/js/header-library.js","src/js/open-modal-library.js"],"sourcesContent":["import './js/constants.js';\nimport './js/common.js';\nimport './js/header-library.js';\nimport './js/open-modal-library.js';\nimport './js/modal-film.js';\nimport './js/modal-team.js';\nimport './js/trailer.js';\nimport './js/btn-scroll.js';\nimport './js/spinner.js';\n","import { renderPagination, renderFilmCards, goUp } from './common.js';\nimport { KEY_QUEUE, KEY_WATCHED } from './constants.js';\nimport { getStore } from './local-storage.js';\n\nconst PER_PAGE = 6;\n\nlet allData = [];\nlet currentPage = 1;\n\nconst queueRef = document.querySelector('.filter__item-queue');\nconst watchedRef = document.querySelector('.filter__item-watched');\nconst listRef = document.querySelector('.filter__list');\nconst pagLibraryRef = document.querySelector('.js-pagination-library');\nconst emptyRef = document.querySelector('.empty-list');\nconst emptyTitleRef = document.querySelector('.empty-title');\nconst galleryLibrary = document.querySelector('.js-gallery-library');\n\nwindow.addEventListener('load', () => {\n  queueRef.click();\n});\n\nlistRef.addEventListener('click', onBtnClick);\n\nfunction onBtnClick(evt) {\n  const { name: key, tagName } = evt.target;\n\n  if (tagName !== 'BUTTON') return;\n\n  switch (key) {\n    case KEY_QUEUE:\n      queueRef.classList.add('active');\n      watchedRef.classList.remove('active');\n      break;\n    case KEY_WATCHED:\n      watchedRef.classList.add('active');\n      queueRef.classList.remove('active');\n      break;\n  }\n\n  emptyRef.classList.add('is-hidden');\n\n  allData = [...paginateAllData(key)];\n\n  if (!allData.length) {\n    clearGallery();\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = 'Your film list is empty.';\n    return;\n  }\n  currentPage = 1;\n\n  try {\n    renderFilmCards(allData[currentPage - 1], galleryLibrary);\n    renderPagination(currentPage, allData.length, pagLibraryRef);\n  } catch (error) {\n    clearGallery();\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = 'Something went wrong.';\n  }\n}\n\nfunction clearGallery() {\n  galleryLibrary.innerHTML = '';\n  pagLibraryRef.innerHTML = '';\n}\n\nfunction paginateAllData(key) {\n  try {\n    let filmStorage = getStore(key);\n\n    if (!filmStorage.length) return filmStorage;\n\n    const allStorageDataByPages = [];\n    for (let i = 0; i < filmStorage.length; i += PER_PAGE) {\n      let end =\n        i + PER_PAGE < filmStorage.length ? i + PER_PAGE : filmStorage.length;\n      allStorageDataByPages.push(filmStorage.slice(i, end));\n    }\n    return allStorageDataByPages;\n  } catch (error) {\n    return [];\n  }\n}\n\npagLibraryRef.addEventListener('click', onClickPagination);\n\nfunction onClickPagination(evt) {\n  const target = evt.target;\n\n  if (target.textContent === '...' || target.tagName !== 'LI') return;\n\n  if (target.classList.contains('js-pagination__arrow-left')) currentPage -= 1;\n\n  if (target.classList.contains('js-pagination__arrow-right')) currentPage += 1;\n\n  if (target.classList.contains('js-pagination__button'))\n    currentPage = Number(target.textContent);\n\n  try {\n    renderFilmCards(allData[currentPage - 1], galleryLibrary);\n    renderPagination(currentPage, allData.length, pagLibraryRef);\n\n    emptyRef.classList.add('is-hidden');\n  } catch (error) {\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = error.message;\n  }\n\n  goUp();\n}\n","import ModalFilm from './modal-film.js';\nimport { changeStore, getFilmData } from './common.js';\n\nconst gallery = document.querySelector('.js-gallery-library');\nconst closeBtn = document.querySelector('[data-modal-close]');\nconst btnWrapperRef = document.querySelector('.btn__wrapper');\n\nconst modalFilm = new ModalFilm();\n\nfunction onBtnClick(evt) {\n  const { nodeName, name: key } = evt.target;\n  if (nodeName !== 'BUTTON') return;\n  changeStore(key);\n  modalFilm.rerenderBtnWrapper();\n}\n\nfunction onOpenModal(evt) {\n  window.addEventListener('keydown', onCloseModalEsc);\n  document.addEventListener('click', onOverlayClose);\n  closeBtn.addEventListener('click', closeModal);\n\n  const { id, nodeName, name } = evt.target;\n  evt.preventDefault();\n\n  if (nodeName !== 'IMG') return;\n\n  const dataCurrentFilm = getFilmData(id);\n\n  modalFilm.modifyDataFilm(dataCurrentFilm);\n  modalFilm.open();\n\n  btnWrapperRef.addEventListener('click', onBtnClick);\n}\n\nfunction closeModal() {\n  modalFilm.close();\n\n  window.removeEventListener('keydown', onCloseModalEsc);\n  document.removeEventListener('click', onOverlayClose);\n  closeBtn.removeEventListener('click', closeModal);\n\n  window.location.reload();\n}\n\nfunction onOverlayClose(evt) {\n  if (evt.target.classList.contains('backdrop')) closeModal();\n}\n\nfunction onCloseModalEsc(evt) {\n  if (evt.code === 'Escape') {\n    closeModal();\n  }\n}\n\ngallery.addEventListener('click', onOpenModal);\n"],"names":["parcelRequire","$7EEHk","$aa1852bce7d92573$var$allData","$aa1852bce7d92573$var$currentPage","$aa1852bce7d92573$var$queueRef","document","querySelector","$aa1852bce7d92573$var$watchedRef","$aa1852bce7d92573$var$listRef","$aa1852bce7d92573$var$pagLibraryRef","$aa1852bce7d92573$var$emptyRef","$aa1852bce7d92573$var$emptyTitleRef","$aa1852bce7d92573$var$galleryLibrary","$aa1852bce7d92573$var$clearGallery","innerHTML","$aa1852bce7d92573$var$paginateAllData","key","filmStorage","$b5rV1","getStore","length","allStorageDataByPages","i","end","push","slice","error","window","addEventListener","click","evt","name","tagName","target","$8G1wF","KEY_QUEUE","classList","add","remove","KEY_WATCHED","textContent","renderFilmCards","renderPagination","contains","Number","message","goUp","$fQE3M","$52d45de5747c39fe$var$gallery","$52d45de5747c39fe$var$closeBtn","$52d45de5747c39fe$var$btnWrapperRef","$52d45de5747c39fe$var$modalFilm","default","$52d45de5747c39fe$var$onBtnClick","nodeName","changeStore","rerenderBtnWrapper","$52d45de5747c39fe$var$closeModal","close","removeEventListener","$52d45de5747c39fe$var$onCloseModalEsc","$52d45de5747c39fe$var$onOverlayClose","location","reload","code","id","preventDefault","dataCurrentFilm","getFilmData","modifyDataFilm","open"],"version":3,"file":"library.b1cdfad5.js.map"}