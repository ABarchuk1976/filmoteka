{"mappings":"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","sources":["src/library.js","src/js/open-modal-library.js","src/js/header-library.js"],"sourcesContent":["import './js/modal-team.js';\nimport './js/btn-scroll.js';\nimport './js/local-storage-set.js';\nimport './js/trailer.js';\nimport './js/open-modal-library.js';\nimport './js/header-library.js';\n","import * as storageLocal from './local-storage.js';\nimport ModalFilm from './modal-film.js';\nimport { sendWatchedToStorage, sendQueueToStorage } from './local-storage-set';\nconst refs = {\n  gallery: document.querySelector('.js-gallery-library'),\n  closeBtn: document.querySelector('[data-modal-close]'),\n  btnWatched: document.querySelector('.btn_watched'),\n  btnQueue: document.querySelector('.btn_queue'),\n  activLibraryBtn: document.querySelector(\n    '.filter__item>.filter__button--active'\n  ),\n};\n// console.log(refs.activLibraryBtn.textContent);\nconst modalFilm = new ModalFilm();\n\nrefs.gallery.addEventListener('click', onOpenModal);\nrefs.closeBtn.addEventListener('click', onCloseModal);\nwindow.addEventListener('keydown', onCloseModalEsc);\ndocument.addEventListener('click', onOverlayClose);\n\nfunction onOpenModal(e) {\n  e.preventDefault();\n\n  if (e.target.nodeName !== 'IMG') return;\n\n  const dataCurentFilm = getFilmData(e.target.id);\n\n  modalFilm.modifyDataFilm(dataCurentFilm);\n  modalFilm.open();\n\n  ///// for local-storage and button /////////\n  refs.btnWatched.addEventListener('click', onWatchedBtnClick);\n  refs.btnQueue.addEventListener('click', onQueueBtnClick);\n\n  localStorage.setItem('CurrentFilm', JSON.stringify(dataCurentFilm));\n\n  checkWatchedStorage(dataCurentFilm);\n  if (refs.btnWatched.classList.contains('watched_remove')) {\n    refs.btnWatched.textContent = 'REMOVE FROM WATCHED';\n  } else if (refs.btnWatched.classList.contains('watched_send')) {\n    refs.btnWatched.textContent = 'ADD TO WATCHED';\n  }\n\n  checkQueueStorage(dataCurentFilm);\n  if (refs.btnQueue.classList.contains('queue_remove')) {\n    refs.btnQueue.textContent = 'REMOVE FROM QUEUE';\n  } else if (refs.btnWatched.classList.contains('queue_send')) {\n    refs.btnQueue.textContent = 'ADD TO QUEUE';\n  }\n\n  function onWatchedBtnClick() {\n    if (refs.btnWatched.classList.contains('watched_send')) {\n      refs.btnWatched.textContent = 'REMOVE FROM WATCHED';\n      refs.btnWatched.classList.replace('watched_send', 'watched_remove');\n\n      sendWatchedToStorage();\n    } else if (refs.btnWatched.classList.contains('watched_remove')) {\n      refs.btnWatched.textContent = 'ADD TO WATCHED';\n      refs.btnWatched.classList.replace('watched_remove', 'watched_send');\n\n      removeWatchedFilm(dataCurentFilm);\n    }\n\n    refs.btnWatched.textContent = 'ADD TO WATCHED';\n    refs.btnWatched.classList.replace('watched_remove', 'watched_send');\n  }\n\n  function removeWatchedFilm(currentFilm) {\n    try {\n      const getWatchedFromStorage = localStorage.getItem('WatchedMovies');\n      const getWatchedArray = JSON.parse(getWatchedFromStorage);\n\n      const watchedFilmIndex = getWatchedArray.findIndex(\n        value => value.id === currentFilm.id\n      );\n      getWatchedArray.splice(watchedFilmIndex, 1);\n      localStorage.setItem('WatchedMovies', JSON.stringify(getWatchedArray));\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n    }\n  }\n\n  function onQueueBtnClick() {\n    if (refs.btnQueue.classList.contains('queue_send')) {\n      refs.btnQueue.textContent = 'REMOVE FROM QUEUE';\n      refs.btnQueue.classList.replace('queue_send', 'queue_remove');\n\n      sendQueueToStorage();\n    } else if (refs.btnQueue.classList.contains('queue_remove')) {\n      refs.btnQueue.textContent = 'ADD TO QUEUE';\n      refs.btnQueue.classList.replace('queue_remove', 'queue_send');\n\n      removeQueueFilm(dataCurentFilm);\n    }\n\n    refs.btnQueue.textContent = 'ADD TO QUEUE';\n    refs.btnQueue.classList.replace('queue_remove', 'queue_send');\n  }\n\n  function removeQueueFilm(currentFilm) {\n    try {\n      const getQueueFromStorage = localStorage.getItem('QueueMovies');\n      const getQueueArray = JSON.parse(getQueueFromStorage);\n\n      const queueFilmIndex = getQueueArray.findIndex(\n        value => value.id === currentFilm.id\n      );\n      getQueueArray.splice(queueFilmIndex, 1);\n      localStorage.setItem('QueueMovies', JSON.stringify(getQueueArray));\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n    }\n  }\n  ///////////////////end of local-storage ///////////\n\n  refs.closeBtn.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onCloseModalEsc);\n}\n\nfunction onCloseModal() {\n  modalFilm.close();\n\n  refs.closeBtn.removeEventListener('click', onCloseModal);\n  window.removeEventListener('keydown', onCloseModalEsc);\n\n  window.location.reload();\n}\n\nfunction onCloseModalEsc(e) {\n  if (e.code === 'Escape') {\n    modalFilm.close();\n\n    refs.closeBtn.removeEventListener('click', onCloseModal);\n    window.removeEventListener('keydown', onCloseModalEsc);\n  }\n}\n\nfunction getFilmData(filmId) {\n  const filmList = storageLocal\n    .load('QueueMovies')\n    .concat(storageLocal.load('WatchedMovies'));\n  return filmList.find(film => film.id === Number(filmId));\n}\n\nfunction onOverlayClose(e) {\n  // e.preventDefault();\n\n  if (!e.target.closest('.modal') && e.target.closest('.backdrop')) {\n    onCloseModal();\n  }\n}\n///////////// checks for button /////////////////\n\nfunction checkWatchedStorage(currentFilm) {\n  try {\n    const getWatchedFromStorage = localStorage.getItem('WatchedMovies');\n    const getWatchedArray = JSON.parse(getWatchedFromStorage);\n    const checkWatchedStorage = getWatchedArray.find(\n      option => option.id === currentFilm.id\n    );\n    if (checkWatchedStorage) {\n      refs.btnWatched.classList.replace('watched_send', 'watched_remove');\n      refs.btnWatched.textContent = 'REMOVE FROM WATCHED';\n    } else {\n      refs.btnWatched.classList.replace('watched_remove', 'watched_send');\n      refs.btnWatched.textContent = 'ADD TO WATCHED';\n    }\n  } catch (error) {\n    // console.error('Get state error: ', error.message);\n    refs.btnWatched.classList.replace('watched_remove', 'watched_send');\n  }\n}\n\nfunction checkQueueStorage(currentFilm) {\n  try {\n    const getQueueFromStorage = localStorage.getItem('QueueMovies');\n    const getQueueArray = JSON.parse(getQueueFromStorage);\n    const checkQueueStorage = getQueueArray.find(\n      option => option.id === currentFilm.id\n    );\n    if (checkQueueStorage) {\n      refs.btnQueue.classList.replace('queue_send', 'queue_remove');\n      refs.btnQueue.textContent = 'REMOVE FROM QUEUE';\n    } else {\n      refs.btnQueue.classList.replace('queue_remove', 'queue_send');\n      refs.btnQueue.textContent = 'ADD TO QUEUE';\n    }\n  } catch (error) {\n    // console.error('Get state error: ', error.message);\n    refs.btnQueue.classList.replace('queue_remove', 'queue_send');\n  }\n}\n","import { renderPagination, renderFilmCards, goUp } from './common.js';\n\nconst KEY_WATCHED = 'WatchedMovies';\nconst KEY_QUEUE = 'QueueMovies';\nconst PER_PAGE = 6;\n\nlet allData = [];\nlet currentPage = 1;\n// 1 - do queue, 0 - do watched\nlet currentProcess = 1;\n\nconst queueRef = document.querySelector('.filter__item-queue');\nconst watchedRef = document.querySelector('.filter__item-watched');\nconst pagLibraryRef = document.querySelector('.js-pagination-library');\nconst emptyRef = document.querySelector('.empty-list');\nconst emptyTitleRef = document.querySelector('.empty-title');\nconst galleryLibrary = document.querySelector('.js-gallery-library');\n\nwindow.addEventListener('load', () => {\n  queueRef.click();\n  currentPage = 1;\n});\n\nqueueRef.addEventListener('click', onBtnClick);\nwatchedRef.addEventListener('click', onBtnClick);\n\nfunction onBtnClick(evt) {\n  const target = evt.target;\n\n  currentProcess = target.classList.contains('filter__item-queue') ? 1 : 0;\n  currentPage = 1;\n\n  let key = currentProcess ? KEY_QUEUE : KEY_WATCHED;\n\n  if (currentProcess) {\n    queueRef.classList.add('active');\n    watchedRef.classList.remove('active');\n  } else {\n    watchedRef.classList.add('active');\n    queueRef.classList.remove('active');\n  }\n\n  try {\n    allData.length = 0;\n    allData = [...paginateAllData(key)];\n\n    if (!allData || !allData.length) {\n      throw 'Your film list is empty';\n    }\n\n    renderFilmCards(allData[currentPage - 1], galleryLibrary);\n    renderPagination(currentPage, allData.length, pagLibraryRef);\n\n    emptyRef.classList.add('is-hidden');\n  } catch (error) {\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = 'Your film list is empty';\n  }\n}\n\nfunction paginateAllData(key) {\n  try {\n    let filmStorage = localStorage.getItem(key);\n\n    if (filmStorage) {\n      filmStorage = JSON.parse(filmStorage);\n\n      const allStorageDataByPages = [];\n      for (let i = 0; i < filmStorage.length; i += PER_PAGE) {\n        let end =\n          i + PER_PAGE < filmStorage.length ? i + PER_PAGE : filmStorage.length;\n        allStorageDataByPages.push(filmStorage.slice(i, end));\n      }\n      return allStorageDataByPages;\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\npagLibraryRef.addEventListener('click', onClickPagination);\n\nfunction onClickPagination(evt) {\n  const target = evt.target;\n\n  if (target.textContent === '...' || target.tagName !== 'LI') return;\n\n  if (target.classList.contains('js-pagination__arrow-left')) currentPage -= 1;\n\n  if (target.classList.contains('js-pagination__arrow-right')) currentPage += 1;\n\n  if (target.classList.contains('js-pagination__button'))\n    currentPage = Number(target.textContent);\n\n  try {\n    if (!allData || !allData.length) {\n      throw 'Your film list is empty';\n    }\n\n    renderFilmCards(allData[currentPage - 1], galleryLibrary);\n    renderPagination(currentPage, allData.length, pagLibraryRef);\n\n    emptyRef.classList.add('is-hidden');\n  } catch (error) {\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = error.message;\n  }\n\n  goUp();\n}\n"],"names":["parcelRequire","$4LMMA","$572566355069554e$var$refs","gallery","document","querySelector","closeBtn","btnWatched","btnQueue","activLibraryBtn","$572566355069554e$var$modalFilm","$73ES2","default","$572566355069554e$var$onCloseModal","close","removeEventListener","window","$572566355069554e$var$onCloseModalEsc","location","reload","e","code","addEventListener","preventDefault","target","nodeName","dataCurentFilm","filmId","id","load","concat","find","film","Number","modifyDataFilm","open","classList","contains","textContent","replace","$iDjs5","sendWatchedToStorage","currentFilm","getWatchedFromStorage","localStorage","getItem","getWatchedArray","JSON","parse","watchedFilmIndex","findIndex","value","splice","setItem","stringify","error","removeWatchedFilm","sendQueueToStorage","getQueueFromStorage","getQueueArray","queueFilmIndex","removeQueueFilm","option","$572566355069554e$var$checkWatchedStorage","$572566355069554e$var$checkQueueStorage","closest","$8nrFW","$cb53717e68f10b0d$var$allData","$cb53717e68f10b0d$var$currentPage","$cb53717e68f10b0d$var$currentProcess","$cb53717e68f10b0d$var$queueRef","$cb53717e68f10b0d$var$watchedRef","$cb53717e68f10b0d$var$pagLibraryRef","$cb53717e68f10b0d$var$emptyRef","$cb53717e68f10b0d$var$emptyTitleRef","$cb53717e68f10b0d$var$galleryLibrary","$cb53717e68f10b0d$var$onBtnClick","evt","key","add","remove","length","$parcel$interopDefault","filmStorage","allStorageDataByPages","i","end","push","slice","console","log","message","$cb53717e68f10b0d$var$paginateAllData","$fJh0j","renderFilmCards","renderPagination","click","tagName","goUp"],"version":3,"file":"library.22651905.js.map"}