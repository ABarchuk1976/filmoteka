!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("4s6iC"),a("fJh0j");var i=a("bpxeT"),o=a("2TvXO"),c=a("dIxxU"),d=a("4s6iC"),u=a("j1lrD"),s=a("fJh0j"),l=document.querySelector(".js-gallery"),f=document.querySelector(".js-pagination"),m=document.querySelector(".header__warning"),v=document.querySelector(".header__input"),p=document.querySelector(".header__form"),g="",h=1,L=1;function y(e){m.insertAdjacentHTML("beforeend",'<div class="header__warning-message">'.concat(e,"</div>")),setTimeout((function(){m.innerHTML=""}),4e3)}function E(){return(E=e(i)(e(o).mark((function t(n,r){var a,i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="",r?(a="".concat(d.API).concat(d.TRENDING,"/").concat(d.MEDIA_TYPE,"/").concat(d.TIME_WINDOW,"?"),a+=new URLSearchParams({api_key:d.KEY,page:n,include_adult:!1})):(a="".concat(d.API,"/search/").concat(d.MEDIA_TYPE,"?"),a+=new URLSearchParams({api_key:d.KEY,language:"en-US",query:v.value.trim().toLowerCase(),page:n,include_adult:!1})),e.next=5,c.default.get(a);case 5:if(200===(i=e.sent).status){e.next=8;break}throw new Error("Service is temporarily unavailable.");case 8:return e.abrupt("return",i.data);case 11:e.prev=11,e.t0=e.catch(0),y(e.t0.message);case 14:case"end":return e.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function w(e,t){(0,u.default)(),setTimeout((function(){return function(e,t){return E.apply(this,arguments)}(e,t).then((function(e){var t=e.page,n=e.results,r=e.total_pages;if((0,s.renderFilmCards)(n,l),(0,s.renderPagination)(t,r,f),!r)throw new Error('Search result "'.concat(g,'" not successful. Enter an another movie name.'))})).catch((function(e){return y(e.message)})).finally((0,u.default)())}),200)}window.addEventListener("load",(function(){w(h,L)})),f.addEventListener("click",(function(e){var t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(h-=1);t.classList.contains("js-pagination__arrow-right")&&(h+=1);t.classList.contains("js-pagination__button")&&(h=Number(t.textContent));w(h,L),(0,s.goUp)()})),p.addEventListener("submit",(function(e){if(L=0,h=1,e.preventDefault(),!(g=e.currentTarget.elements.searchQuery.value.trim().toLowerCase())){y("Search query is empty. Rendering the popular movies."),l.innerHTML="",L=1}w(h,L)})),v.addEventListener("input",(function(e){var t=e.target,n=document.querySelector(".header__btn-clear");function r(){t.value="",n.classList.add("hidden"),n.removeEventListener("click",r)}t.value.length?n.classList.remove("hidden"):(n.classList.add("hidden"),n.removeEventListener("click",r)),n.addEventListener("click",r)}));var _=a("73ES2"),S=a("cDXQO"),T=(s=a("fJh0j"),document.querySelector(".js-gallery")),k=document.querySelector("[data-modal-close]"),b=document.querySelector("[data-modal]"),q=document.querySelector("body"),x=document.querySelector(".btn__wrapper"),D=new(0,_.default);function j(e){var t=e.target,n=t.nodeName,r=t.name;"BUTTON"===n&&((0,s.changeStore)(r),D.rerenderBtnWrapper())}function M(){window.removeEventListener("keydown",N),b.classList.add("is-hidden"),q.classList.remove("body--modal-open"),S.trailerButtonRef.removeEventListener("click",S.handleTrailerButtonClick)}function N(e){console.log(e.code),"Escape"===e.code&&M()}T.addEventListener("click",(function(e){var t=e.target,n=t.id,r=t.nodeName;if(t.name,e.preventDefault(),S.trailerButtonRef.addEventListener("click",S.handleTrailerButtonClick),"IMG"===r){var a=(0,s.getFilmData)(n);D.modifyDataFilm(a),D.open(),x.addEventListener("click",j)}})),document.addEventListener("click",(function(e){e.target===e.currentTarget&&M()})),window.addEventListener("keydown",N),k.addEventListener("click",M),a("73ES2"),a("aZhHc"),a("cDXQO"),a("d7VxN"),a("j1lrD"),a("4LMMA")}();
//# sourceMappingURL=index.303cafd3.js.map
