var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,a.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var s=a("b5rV1"),i=a("2shzp"),c=a("8G1wF"),r=a("fQE3M");const o=document.querySelector(".header__input");function l(e,t,n){let a="";!e||e>t||(e>1&&(a+='<li class="js-pagination__arrow-left">&#8592;</li>'),e>1&&(a+='<li class="js-pagination__button js-pagination__button-end">1</li>'),e>4&&(a+='<li class="js-pagination__points">...</li>'),e>3&&(a+=`<li class="js-pagination__button">${e-2}</li>`),e>2&&(a+=`<li class="js-pagination__button">${e-1}</li>`),a+=`<li class="js-pagination__button js-pagination__button-current">${e}</li>`,e+1<t&&(a+=`<li class="js-pagination__button">${e+1}</li>`),e+2<t&&(a+=`<li class="js-pagination__button">${e+2}</li>`),e+4<t&&(a+='<li class="js-pagination__points">...</li>'),e<t&&(a+=`<li class="js-pagination__button js-pagination__button-end">${t}</li>`),e<t&&(a+='<li class="js-pagination__arrow-right">&#8594;</li>'),n.innerHTML=a)}async function d(e,t){try{let n="";t?(n=`${c.API}${c.TRENDING}/${c.MEDIA_TYPE}/${c.TIME_WINDOW}?`,n+=new URLSearchParams({api_key:c.KEY,page:e,include_adult:!1})):(n=`${c.API}/search/${c.MEDIA_TYPE}?`,n+=new URLSearchParams({api_key:c.KEY,language:"en-US",query:o.value.trim().toLowerCase(),page:e,include_adult:!1}));const a=await i.default.get(n);if(200!==a.status)throw new Error(a.status);return a.data}catch(e){console.log(e.message)}}function u(e,t){let n=e.map((({id:e,poster_path:t,genre_ids:n,title:a,release_date:s})=>{let i=(0,r.getGenre)(n),o=s?s.substring(0,4):"";return i&&o&&(i+=" | "),a||(a="no information"),`\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="${t?c.IMG_PATH+c.SMALL_SIZE+t:c.NO_IMAGE}"\n              alt="${a}"\n              id="${e}"\n            />\n            <h3 class="film-card__film-name">${a}</h3>\n            <p class="film-card__genre">${i}${o}</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t`})).join("");t.innerHTML=n,s.save("film-current-page",[...e])}a("8G1wF"),a("b5rV1");const _=document.querySelector(".js-gallery"),m=document.querySelector(".js-pagination"),h=document.querySelector(".header__warning"),g=document.querySelector(".header__input"),v=document.querySelector(".header__form");let p="",b=1,f=1;function E(){h.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((()=>{h.innerHTML=""}),4e3),_.innerHTML="",f=1,b=1,d(b,f).then((({page:e,results:t,total_pages:n})=>{u(t,_),l(e,n,m)})).catch((()=>{h.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{h.innerHTML=""}),4e3)}))}window.addEventListener("load",(()=>{_.innerHTML="",b=1,f=1,d(b,f).then((({page:e,results:t,total_pages:n})=>{u(t,_),l(e,n,m)})).catch((e=>{h.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{h.innerHTML=""}),4e3)}))})),m.addEventListener("click",(function(e){const t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(b-=1);t.classList.contains("js-pagination__arrow-right")&&(b+=1);t.classList.contains("js-pagination__button")&&(b=Number(t.textContent));d(b,f).then((({page:e,results:t,total_pages:n})=>{u(t,_),l(e,n,m)})).catch((()=>{h.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{h.innerHTML=""}),4e3)}))})),v.addEventListener("submit",(e=>{f=0,b=1,e.preventDefault(),p=e.currentTarget.elements.searchQuery.value.trim().toLowerCase(),p?d(b,f).then((({page:e,results:t,total_pages:n})=>{n?(u(t,_),l(e,n,m)):E()})).catch((e=>{h.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{h.innerHTML=""}),4e3)})):E()})),g.addEventListener("input",(e=>{const t=e.target,n=document.querySelector(".header__btn-clear");function a(e){t.value="",n.classList.add("hidden"),n.removeEventListener("click",a)}t.value.length?n.classList.remove("hidden"):(n.classList.add("hidden"),n.removeEventListener("click",a)),n.addEventListener("click",a)}));s=a("b5rV1"),r=a("fQE3M");var L=a("37v9V"),w=a("9dykO");const T={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},y=new(0,r.default);function M(){const e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,L.handleBackButtonClick)(e,t),y.close(),T.closeBtn.removeEventListener("click",M),L.trailerButtonRef.removeEventListener("click",L.handleTrailerButtonClick),window.removeEventListener("keydown",S)}function S(e){"Escape"===e.code&&(y.close(),T.closeBtn.removeEventListener("click",M),window.removeEventListener("keydown",S))}T.gallery.addEventListener("click",(function(e){if(e.preventDefault(),L.trailerButtonRef.addEventListener("click",L.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,s.load("film-current-page").find((e=>e.id===Number(n))));var n;y.modifyDataFilm(t),y.open(),T.btnWatched.addEventListener("click",(function(){T.btnWatched.classList.contains("watched_send")?(T.btnWatched.textContent="REMOVE FROM WATCHED",T.btnWatched.classList.replace("watched_send","watched_remove"),(0,w.sendWatchedToStorage)()):T.btnWatched.classList.contains("watched_remove")&&(T.btnWatched.textContent="ADD TO WATCHED",T.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));T.btnWatched.textContent="ADD TO WATCHED",T.btnWatched.classList.replace("watched_remove","watched_send")})),T.btnQueue.addEventListener("click",(function(){T.btnQueue.classList.contains("queue_send")?(T.btnQueue.textContent="REMOVE FROM QUEUE",T.btnQueue.classList.replace("queue_send","queue_remove"),(0,w.sendQueueToStorage)()):T.btnQueue.classList.contains("queue_remove")&&(T.btnQueue.textContent="ADD TO QUEUE",T.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));T.btnQueue.textContent="ADD TO QUEUE",T.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(T.btnWatched.classList.replace("watched_send","watched_remove"),T.btnWatched.textContent="REMOVE FROM WATCHED"):(T.btnWatched.classList.replace("watched_remove","watched_send"),T.btnWatched.textContent="ADD TO WATCHED")}catch(e){T.btnWatched.classList.replace("watched_remove","watched_send")}}(t),T.btnWatched.classList.contains("watched_remove")?T.btnWatched.textContent="REMOVE FROM WATCHED":T.btnWatched.classList.contains("watched_send")&&(T.btnWatched.textContent="ADD TO WATCHED");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(T.btnQueue.classList.replace("queue_send","queue_remove"),T.btnQueue.textContent="REMOVE FROM QUEUE"):(T.btnQueue.classList.replace("queue_remove","queue_send"),T.btnQueue.textContent="ADD TO QUEUE")}catch(e){T.btnQueue.classList.replace("queue_remove","queue_send")}})(t),T.btnQueue.classList.contains("queue_remove")?T.btnQueue.textContent="REMOVE FROM QUEUE":T.btnWatched.classList.contains("queue_send")&&(T.btnQueue.textContent="ADD TO QUEUE");T.closeBtn.addEventListener("click",M),window.addEventListener("keydown",S)})),T.closeBtn.addEventListener("click",M),window.addEventListener("keydown",S),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&M()})),a("37v9V"),a("7bYU0"),a("jLhJV");
//# sourceMappingURL=index.eb7c6d14.js.map
