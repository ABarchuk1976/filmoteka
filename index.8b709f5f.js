!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;function c(){document.querySelector(".spinner").classList.toggle("is-hidden")}null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var c={id:e,exports:{}};return t[e]=c,a.call(c.exports,c,c.exports),c.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var r=a("fJh0j");a("4LMMA");var i=document.querySelector(".js-gallery"),o=document.querySelector(".js-pagination"),s=document.querySelector(".header__warning"),d=document.querySelector(".header__input"),u=document.querySelector(".header__form"),l="",v=1,h=1;function m(e){s.insertAdjacentHTML("beforeend",'<div class="header__warning-message">'.concat(e,"</div>")),setTimeout((function(){s.innerHTML=""}),4e3)}function f(e,t){c(),setTimeout((function(){return(0,r.getAPIData)(e,t).then((function(e){var t=e.page,n=e.results,a=e.total_pages;(0,r.renderFilmCards)(n,i),(0,r.renderPagination)(t,a,o)})).catch((function(e){m("Service is temporarily unavailable.")})).finally(c())}),200)}window.addEventListener("load",(function(){i.innerHTML="",f(v=1,h=1)})),o.addEventListener("click",(function(e){var t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(v-=1);t.classList.contains("js-pagination__arrow-right")&&(v+=1);t.classList.contains("js-pagination__button")&&(v=Number(t.textContent));f(v,h),(0,r.goUp)()})),u.addEventListener("submit",(function(e){if(h=0,v=1,e.preventDefault(),!(l=e.currentTarget.elements.searchQuery.value.trim().toLowerCase()))return m(l?'Search result "'.concat(l,'" not successful. Enter an another movie name.'):"Search query is empty. Rendering the popular movies."),i.innerHTML="",void f(v=1,h=1);f(v,h)})),d.addEventListener("input",(function(e){var t=e.target,n=document.querySelector(".header__btn-clear");function a(){t.value="",n.classList.add("hidden"),n.removeEventListener("click",a)}t.value.length?n.classList.remove("hidden"):(n.classList.add("hidden"),n.removeEventListener("click",a)),n.addEventListener("click",a)}));var E=a("4LMMA"),L=a("73ES2"),_=a("cDXQO"),b=a("iDjs5"),g={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},p=new(0,L.default);function w(){var e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,_.handleBackButtonClick)(e,t),p.close(),g.closeBtn.removeEventListener("click",w),_.trailerButtonRef.removeEventListener("click",_.handleTrailerButtonClick),window.removeEventListener("keydown",y)}function y(e){"Escape"===e.code&&(p.close(),g.closeBtn.removeEventListener("click",w),window.removeEventListener("keydown",y))}g.gallery.addEventListener("click",(function(e){if(e.preventDefault(),_.trailerButtonRef.addEventListener("click",_.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;var t=(n=e.target.id,E.load("film-current-page").find((function(e){return e.id===Number(n)})));var n;p.modifyDataFilm(t),p.open(),g.btnWatched.addEventListener("click",(function(){g.btnWatched.classList.contains("watched_send")?(g.btnWatched.textContent="REMOVE FROM WATCHED",g.btnWatched.classList.replace("watched_send","watched_remove"),(0,b.sendWatchedToStorage)()):g.btnWatched.classList.contains("watched_remove")&&(g.btnWatched.textContent="ADD TO WATCHED",g.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{var t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));g.btnWatched.textContent="ADD TO WATCHED",g.btnWatched.classList.replace("watched_remove","watched_send")})),g.btnQueue.addEventListener("click",(function(){g.btnQueue.classList.contains("queue_send")?(g.btnQueue.textContent="REMOVE FROM QUEUE",g.btnQueue.classList.replace("queue_send","queue_remove"),(0,b.sendQueueToStorage)()):g.btnQueue.classList.contains("queue_remove")&&(g.btnQueue.textContent="ADD TO QUEUE",g.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{var t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));g.btnQueue.textContent="ADD TO QUEUE",g.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{var t=localStorage.getItem("WatchedMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(g.btnWatched.classList.replace("watched_send","watched_remove"),g.btnWatched.textContent="REMOVE FROM WATCHED"):(g.btnWatched.classList.replace("watched_remove","watched_send"),g.btnWatched.textContent="ADD TO WATCHED")}catch(e){g.btnWatched.classList.replace("watched_remove","watched_send")}}(t),g.btnWatched.classList.contains("watched_remove")?g.btnWatched.textContent="REMOVE FROM WATCHED":g.btnWatched.classList.contains("watched_send")&&(g.btnWatched.textContent="ADD TO WATCHED");(function(e){try{var t=localStorage.getItem("QueueMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(g.btnQueue.classList.replace("queue_send","queue_remove"),g.btnQueue.textContent="REMOVE FROM QUEUE"):(g.btnQueue.classList.replace("queue_remove","queue_send"),g.btnQueue.textContent="ADD TO QUEUE")}catch(e){g.btnQueue.classList.replace("queue_remove","queue_send")}})(t),g.btnQueue.classList.contains("queue_remove")?g.btnQueue.textContent="REMOVE FROM QUEUE":g.btnWatched.classList.contains("queue_send")&&(g.btnQueue.textContent="ADD TO QUEUE");g.closeBtn.addEventListener("click",w),window.addEventListener("keydown",y)})),g.closeBtn.addEventListener("click",w),window.addEventListener("keydown",y),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&w()})),a("cDXQO"),a("aZhHc"),a("d7VxN")}();
//# sourceMappingURL=index.8b709f5f.js.map
