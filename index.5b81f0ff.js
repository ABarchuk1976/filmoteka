var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,a.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var s=a("b5rV1"),i=a("fQE3M"),r=a("37v9V"),c=a("9dykO");const o={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},l=new(0,i.default);function d(){const e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,r.handleBackButtonClick)(e,t),l.close(),o.closeBtn.removeEventListener("click",d),r.trailerButtonRef.removeEventListener("click",r.handleTrailerButtonClick),window.removeEventListener("keydown",u)}function u(e){"Escape"===e.code&&(l.close(),o.closeBtn.removeEventListener("click",d),window.removeEventListener("keydown",u))}o.gallery.addEventListener("click",(function(e){if(e.preventDefault(),r.trailerButtonRef.addEventListener("click",r.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,s.load("film-current-page").find((e=>e.id===Number(n))));var n;l.modifyDataFilm(t),l.open(),o.btnWatched.addEventListener("click",(function(){o.btnWatched.classList.contains("watched_send")?(o.btnWatched.textContent="REMOVE FROM WATCHED",o.btnWatched.classList.replace("watched_send","watched_remove"),(0,c.sendWatchedToStorage)()):o.btnWatched.classList.contains("watched_remove")&&(o.btnWatched.textContent="ADD TO WATCHED",o.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));o.btnWatched.textContent="ADD TO WATCHED",o.btnWatched.classList.replace("watched_remove","watched_send")})),o.btnQueue.addEventListener("click",(function(){o.btnQueue.classList.contains("queue_send")?(o.btnQueue.textContent="REMOVE FROM QUEUE",o.btnQueue.classList.replace("queue_send","queue_remove"),(0,c.sendQueueToStorage)()):o.btnQueue.classList.contains("queue_remove")&&(o.btnQueue.textContent="ADD TO QUEUE",o.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));o.btnQueue.textContent="ADD TO QUEUE",o.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(o.btnWatched.classList.replace("watched_send","watched_remove"),o.btnWatched.textContent="REMOVE FROM WATCHED"):(o.btnWatched.classList.replace("watched_remove","watched_send"),o.btnWatched.textContent="ADD TO WATCHED")}catch(e){o.btnWatched.classList.replace("watched_remove","watched_send")}}(t),o.btnWatched.classList.contains("watched_remove")?o.btnWatched.textContent="REMOVE FROM WATCHED":o.btnWatched.classList.contains("watched_send")&&(o.btnWatched.textContent="ADD TO WATCHED");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(o.btnQueue.classList.replace("queue_send","queue_remove"),o.btnQueue.textContent="REMOVE FROM QUEUE"):(o.btnQueue.classList.replace("queue_remove","queue_send"),o.btnQueue.textContent="ADD TO QUEUE")}catch(e){o.btnQueue.classList.replace("queue_remove","queue_send")}})(t),o.btnQueue.classList.contains("queue_remove")?o.btnQueue.textContent="REMOVE FROM QUEUE":o.btnWatched.classList.contains("queue_send")&&(o.btnQueue.textContent="ADD TO QUEUE");o.closeBtn.addEventListener("click",d),window.addEventListener("keydown",u)})),o.closeBtn.addEventListener("click",d),window.addEventListener("keydown",u),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&d()})),a("37v9V"),a("7bYU0"),a("jLhJV");s=a("b5rV1");var _=a("2shzp"),m=a("8G1wF");i=a("fQE3M");const g=document.querySelector(".header__input");function h(e,t,n){let a="";!e||e>t||(e>1&&(a+='<li class="js-pagination__arrow-left">&#8592;</li>'),e>1&&(a+='<li class="js-pagination__button js-pagination__button-end">1</li>'),e>4&&(a+='<li class="js-pagination__points">...</li>'),e>3&&(a+=`<li class="js-pagination__button">${e-2}</li>`),e>2&&(a+=`<li class="js-pagination__button">${e-1}</li>`),a+=`<li class="js-pagination__button js-pagination__button-current">${e}</li>`,e+1<t&&(a+=`<li class="js-pagination__button">${e+1}</li>`),e+2<t&&(a+=`<li class="js-pagination__button">${e+2}</li>`),e+4<t&&(a+='<li class="js-pagination__points">...</li>'),e<t&&(a+=`<li class="js-pagination__button js-pagination__button-end">${t}</li>`),e<t&&(a+='<li class="js-pagination__arrow-right">&#8594;</li>'),n.innerHTML=a)}async function p(e,t){try{let n="";t?(n=`${m.API}${m.TRENDING}/${m.MEDIA_TYPE}/${m.TIME_WINDOW}?`,n+=new URLSearchParams({api_key:m.KEY,page:e,include_adult:!1})):(n=`${m.API}/search/${m.MEDIA_TYPE}?`,n+=new URLSearchParams({api_key:m.KEY,language:"en-US",query:g.value.trim().toLowerCase(),page:e,include_adult:!1}));const a=await _.default.get(n);if(200!==a.status)throw new Error(a.status);return a.data}catch(e){console.log(e.message)}}function v(e,t){let n=e.map((({id:e,poster_path:t,genre_ids:n,title:a,release_date:s})=>{let r=(0,i.getGenre)(n),c=s?s.substring(0,4):"";return r&&c&&(r+=" | "),a||(a="no information"),`\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="${t?m.IMG_PATH+m.SMALL_SIZE+t:m.NO_IMAGE}"\n              alt="${a}"\n              id="${e}"\n            />\n            <h3 class="film-card__film-name">${a}</h3>\n            <p class="film-card__genre">${r}${c}</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t`})).join("");t.innerHTML=n,s.save("film-current-page",[...e])}a("8G1wF"),a("b5rV1");const b=document.querySelector(".js-gallery"),f=document.querySelector(".js-pagination"),E=document.querySelector(".header__warning"),L=(document.querySelector(".header__input"),document.querySelector(".header__btn-close"),document.querySelector(".header__form"));let w="",T=1,y=1;window.addEventListener("load",(()=>{b.innerHTML="",T=1,y=1,p(T,y).then((({page:e,results:t,total_pages:n})=>{v(t,b),h(e,n,f)})).catch((e=>{E.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{E.innerHTML=""}),4e3)}))})),f.addEventListener("click",(function(e){const t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(T-=1);t.classList.contains("js-pagination__arrow-right")&&(T+=1);t.classList.contains("js-pagination__button")&&(T=Number(t.textContent));p(T,y).then((({page:e,results:t,total_pages:n})=>{v(t,b),h(e,n,f)})).catch((()=>{E.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{E.innerHTML=""}),4e3)}))})),L.addEventListener("submit",(e=>{if(y=0,T=1,e.preventDefault(),w=e.currentTarget.elements.searchQuery.value.trim().toLowerCase(),!w)return E.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((()=>{E.innerHTML=""}),4e3),b.innerHTML="",y=1,T=1,void p(T,y).then((({page:e,results:t,total_pages:n})=>{v(t,b),h(e,n,f)})).catch((()=>{E.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{E.innerHTML=""}),4e3)}));p(T,y).then((({page:e,results:t,total_pages:n})=>{v(t,b),h(e,n,f)})).catch((e=>{E.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{E.innerHTML=""}),4e3)}))})),a("eBpwN");
//# sourceMappingURL=index.5b81f0ff.js.map
