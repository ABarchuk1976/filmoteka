{"mappings":"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","sources":["src/library.js","src/js/header-library.js","src/js/open-modal-library.js"],"sourcesContent":["import './js/constants.js';\nimport './js/common.js';\nimport './js/header-library.js';\nimport './js/open-modal-library.js';\nimport './js/modal-film.js';\nimport './js/modal-team.js';\nimport './js/trailer.js';\nimport './js/btn-scroll.js';\nimport './js/spinner.js';\n","import { renderPagination, renderFilmCards, goUp } from './common.js';\nimport { KEY_QUEUE, KEY_WATCHED } from './constants.js';\nimport { getStore } from './local-storage.js';\n\nconst PER_PAGE = 6;\n\nlet allData = [];\nlet currentPage = 1;\n\nconst queueRef = document.querySelector('.filter__item-queue');\nconst watchedRef = document.querySelector('.filter__item-watched');\nconst listRef = document.querySelector('.filter__list');\nconst pagLibraryRef = document.querySelector('.js-pagination-library');\nconst emptyRef = document.querySelector('.empty-list');\nconst emptyTitleRef = document.querySelector('.empty-title');\nconst galleryLibrary = document.querySelector('.js-gallery-library');\n\nwindow.addEventListener('load', () => {\n  queueRef.click();\n});\n\nlistRef.addEventListener('click', onBtnClick);\n\nfunction onBtnClick(evt) {\n  const { name: key, tagName } = evt.target;\n\n  if (tagName !== 'BUTTON') return;\n\n  switch (key) {\n    case KEY_QUEUE:\n      queueRef.classList.add('active');\n      watchedRef.classList.remove('active');\n      break;\n    case KEY_WATCHED:\n      watchedRef.classList.add('active');\n      queueRef.classList.remove('active');\n      break;\n  }\n\n  emptyRef.classList.add('is-hidden');\n\n  allData = [...paginateAllData(key)];\n\n  console.log('In header-library: ', allData);\n\n  if (!allData.length) {\n    clearGallery();\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = 'Your film list is empty.';\n    return;\n  }\n  currentPage = 1;\n\n  try {\n    console.log(allData);\n\n    renderFilmCards(allData[currentPage - 1], galleryLibrary);\n    renderPagination(currentPage, allData.length, pagLibraryRef);\n  } catch (error) {\n    clearGallery();\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = 'Something went wrong.';\n  }\n}\n\nfunction clearGallery() {\n  galleryLibrary.innerHTML = '';\n  pagLibraryRef.innerHTML = '';\n}\n\nfunction paginateAllData(key) {\n  try {\n    let filmStorage = getStore(key);\n\n    if (!filmStorage.length) return filmStorage;\n\n    const allStorageDataByPages = [];\n    for (let i = 0; i < filmStorage.length; i += PER_PAGE) {\n      let end =\n        i + PER_PAGE < filmStorage.length ? i + PER_PAGE : filmStorage.length;\n      allStorageDataByPages.push(filmStorage.slice(i, end));\n    }\n    console.log('allStorageDataByPages: ', allStorageDataByPages);\n    return allStorageDataByPages;\n  } catch (error) {\n    return [];\n  }\n}\n\npagLibraryRef.addEventListener('click', onClickPagination);\n\nfunction onClickPagination(evt) {\n  const target = evt.target;\n\n  if (target.textContent === '...' || target.tagName !== 'LI') return;\n\n  if (target.classList.contains('js-pagination__arrow-left')) currentPage -= 1;\n\n  if (target.classList.contains('js-pagination__arrow-right')) currentPage += 1;\n\n  if (target.classList.contains('js-pagination__button'))\n    currentPage = Number(target.textContent);\n\n  try {\n    renderFilmCards(allData[currentPage - 1], galleryLibrary);\n    renderPagination(currentPage, allData.length, pagLibraryRef);\n\n    emptyRef.classList.add('is-hidden');\n  } catch (error) {\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = error.message;\n  }\n\n  goUp();\n}\n","import { setStore, getStore, removeStore } from './local-storage.js';\nimport ModalFilm from './modal-film.js';\nimport { changeStore, getFilmData } from './common.js';\n\nconst gallery = document.querySelector('.js-gallery-library');\nconst closeBtn = document.querySelector('[data-modal-close]');\nconst overlay = document.querySelector('[data-modal');\nconst btnWrapperRef = document.querySelector('.btn__wrapper');\n\nconst modalFilm = new ModalFilm();\n\ngallery.addEventListener('click', onOpenModal);\ncloseBtn.addEventListener('click', onCloseModal);\nwindow.addEventListener('keydown', onCloseModalEsc);\noverlay.addEventListener('click', onOverlayClose);\n\nfunction onOpenModal(evt) {\n  const { id, nodeName, name } = evt.target;\n\n  evt.preventDefault();\n  if (nodeName !== 'IMG') return;\n\n  const dataCurrentFilm = getFilmData(id);\n\n  modalFilm.modifyDataFilm(dataCurrentFilm);\n  modalFilm.open();\n\n  btnWrapperRef.addEventListener('click', onBtnClick);\n}\n\nfunction onBtnClick(evt) {\n  const { nodeName, name: key } = evt.target;\n  if (nodeName !== 'BUTTON') return;\n  changeStore(key);\n  modalFilm.rerenderBtnWrapper();\n}\n\ncloseBtn.addEventListener('click', onCloseModal);\nwindow.addEventListener('keydown', onCloseModalEsc);\n\nfunction onCloseModal() {\n  modalFilm.close();\n\n  closeBtn.removeEventListener('click', onCloseModal);\n  window.removeEventListener('keydown', onCloseModalEsc);\n\n  window.location.reload();\n}\n\nfunction onCloseModalEsc(evt) {\n  if (evt.code === 'Escape') {\n    modalFilm.close();\n\n    closeBtn.removeEventListener('click', onCloseModal);\n    window.removeEventListener('keydown', onCloseModalEsc);\n  }\n}\n\nfunction onOverlayClose(evt) {\n  const { currentTarget, target } = evt;\n  console.log(currentTarget, target);\n  if (currentTarget === target) onCloseModal();\n}\n"],"names":["parcelRequire","$8nrFW","$cb53717e68f10b0d$var$allData","$cb53717e68f10b0d$var$currentPage","$cb53717e68f10b0d$var$queueRef","document","querySelector","$cb53717e68f10b0d$var$watchedRef","$cb53717e68f10b0d$var$listRef","$cb53717e68f10b0d$var$pagLibraryRef","$cb53717e68f10b0d$var$emptyRef","$cb53717e68f10b0d$var$emptyTitleRef","$cb53717e68f10b0d$var$galleryLibrary","$cb53717e68f10b0d$var$clearGallery","innerHTML","window","addEventListener","click","evt","_target","target","key","name","tagName","$4s6iC","KEY_QUEUE","classList","add","remove","KEY_WATCHED","$parcel$interopDefault","filmStorage","$4LMMA","getStore","length","allStorageDataByPages","i","end","push","slice","console","log","error","$cb53717e68f10b0d$var$paginateAllData","textContent","$fJh0j","renderFilmCards","renderPagination","contains","Number","message","goUp","$572566355069554e$var$gallery","$572566355069554e$var$closeBtn","$572566355069554e$var$overlay","$572566355069554e$var$btnWrapperRef","$572566355069554e$var$modalFilm","$73ES2","default","$572566355069554e$var$onBtnClick","nodeName","changeStore","rerenderBtnWrapper","$572566355069554e$var$onCloseModal","close","removeEventListener","$572566355069554e$var$onCloseModalEsc","location","reload","code","id","preventDefault","dataCurrentFilm","getFilmData","modifyDataFilm","open","currentTarget"],"version":3,"file":"library.7a103ab3.js.map"}