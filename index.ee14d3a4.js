var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=r),r("8G1wF"),r("7EEHk");var a=r("2shzp"),i=r("8G1wF"),o=r("04jNI"),c=r("7EEHk");const d=document.querySelector(".js-gallery"),s=document.querySelector(".js-pagination"),l=document.querySelector(".header__warning"),u=document.querySelector(".header__input"),m=document.querySelector(".header__form");let f="",v=1,E=1;function p(e){l.insertAdjacentHTML("beforeend",`<div class="header__warning-message">${e}</div>`),setTimeout((()=>{l.innerHTML=""}),4e3)}function g(e,t){(0,o.default)(),setTimeout((()=>async function(e,t){try{let n="";t?(n=`${i.API}${i.TRENDING}/${i.MEDIA_TYPE}/${i.TIME_WINDOW}?`,n+=new URLSearchParams({api_key:i.KEY,page:e,include_adult:!1})):(n=`${i.API}/search/${i.MEDIA_TYPE}?`,n+=new URLSearchParams({api_key:i.KEY,language:"en-US",query:u.value.trim().toLowerCase(),page:e,include_adult:!1}));const r=await a.default.get(n);if(200!==r.status)throw new Error("Service is temporarily unavailable.");return r.data}catch(e){p(e.message)}}(e,t).then((({page:e,results:t,total_pages:n})=>{if((0,c.renderFilmCards)(t,d),(0,c.renderPagination)(e,n,s),!n)throw new Error(`Search result "${f}" not successful. Enter an another movie name.`)})).catch((e=>p(e.message))).finally((0,o.default)())),200)}window.addEventListener("load",(()=>{g(v,E)})),s.addEventListener("click",(function(e){const t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(v-=1);t.classList.contains("js-pagination__arrow-right")&&(v+=1);t.classList.contains("js-pagination__button")&&(v=Number(t.textContent));g(v,E),(0,c.goUp)()})),m.addEventListener("submit",(e=>{if(E=0,v=1,e.preventDefault(),f=e.currentTarget.elements.searchQuery.value.trim().toLowerCase(),!f){p("Search query is empty. Rendering the popular movies."),d.innerHTML="",E=1}g(v,E)})),u.addEventListener("input",(e=>{const t=e.target,n=document.querySelector(".header__btn-clear");function r(){t.value="",n.classList.add("hidden"),n.removeEventListener("click",r)}t.value.length?n.classList.remove("hidden"):(n.classList.add("hidden"),n.removeEventListener("click",r)),n.addEventListener("click",r)})),r("b5rV1");var w=r("fQE3M"),L=r("37v9V");c=r("7EEHk");const h=document.querySelector(".js-gallery"),y=document.querySelector("[data-modal-close]"),_=document.querySelector(".btn__wrapper"),k=new(0,w.default);function S(e){const{nodeName:t,name:n}=e.target;"BUTTON"===t&&((0,c.changeStore)(n),k.rerenderBtnWrapper())}function T(){const e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,L.handleBackButtonClick)(e,t),k.close(),y.removeEventListener("click",T),L.trailerButtonRef.removeEventListener("click",L.handleTrailerButtonClick),window.removeEventListener("keydown",b)}function b(e){"Escape"===e.code&&(k.close(),y.removeEventListener("click",T),window.removeEventListener("keydown",b))}h.addEventListener("click",(function(e){const{id:t,nodeName:n,name:r}=e.target;if(e.preventDefault(),L.trailerButtonRef.addEventListener("click",L.handleTrailerButtonClick),"IMG"!==n)return;const a=(0,c.getFilmData)(t);k.modifyDataFilm(a),k.open(),_.addEventListener("click",S)})),y.addEventListener("click",T),window.addEventListener("keydown",b),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&T()})),y.addEventListener("click",T),window.addEventListener("keydown",b),r("fQE3M"),r("7bYU0"),r("37v9V"),r("jLhJV"),r("04jNI"),r("b5rV1");
//# sourceMappingURL=index.ee14d3a4.js.map
