var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var r=a("04jNI"),s=a("7EEHk");a("b5rV1");const c=document.querySelector(".js-gallery"),i=document.querySelector(".js-pagination"),d=document.querySelector(".header__warning"),o=document.querySelector(".header__input"),l=document.querySelector(".header__form");let u="",v=1,m=1;function h(){(0,r.default)(),d.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((()=>{d.innerHTML=""}),4e3),c.innerHTML="",m=1,v=1,(0,s.getAPIData)(v,m).then((({page:e,results:t,total_pages:n})=>{(0,s.renderFilmCards)(t,c),(0,s.renderPagination)(e,n,i)})).catch((()=>{d.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{d.innerHTML=""}),4e3)})),(0,r.default)()}window.addEventListener("load",(()=>{(0,r.default)(),c.innerHTML="",v=1,m=1,(0,s.getAPIData)(v,m).then((({page:e,results:t,total_pages:n})=>{(0,s.renderFilmCards)(t,c),(0,s.renderPagination)(e,n,i)})).catch((e=>{d.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{d.innerHTML=""}),4e3)})),(0,r.default)()})),i.addEventListener("click",(function(e){(0,r.default)();const t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(v-=1);t.classList.contains("js-pagination__arrow-right")&&(v+=1);t.classList.contains("js-pagination__button")&&(v=Number(t.textContent));(0,s.getAPIData)(v,m).then((({page:e,results:t,total_pages:n})=>{(0,s.renderFilmCards)(t,c),(0,s.renderPagination)(e,n,i)})).catch((()=>{d.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{d.innerHTML=""}),4e3)})),(0,r.default)(),(0,s.goUp)()})),l.addEventListener("submit",(e=>{m=0,v=1,(0,r.default)(),e.preventDefault(),u=e.currentTarget.elements.searchQuery.value.trim().toLowerCase(),u?((0,s.getAPIData)(v,m).then((({page:e,results:t,total_pages:n})=>{n?((0,s.renderFilmCards)(t,c),(0,s.renderPagination)(e,n,i)):h()})).catch((e=>{d.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{d.innerHTML=""}),4e3)})),(0,r.default)()):h()})),o.addEventListener("input",(e=>{const t=e.target,n=document.querySelector(".header__btn-clear");function a(){t.value="",n.classList.add("hidden"),n.removeEventListener("click",a)}t.value.length?n.classList.remove("hidden"):(n.classList.add("hidden"),n.removeEventListener("click",a)),n.addEventListener("click",a)}));var g=a("b5rV1"),_=a("fQE3M"),f=a("37v9V"),L=a("9dykO");const b={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},E=new(0,_.default);function p(){const e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,f.handleBackButtonClick)(e,t),E.close(),b.closeBtn.removeEventListener("click",p),f.trailerButtonRef.removeEventListener("click",f.handleTrailerButtonClick),window.removeEventListener("keydown",w)}function w(e){"Escape"===e.code&&(E.close(),b.closeBtn.removeEventListener("click",p),window.removeEventListener("keydown",w))}b.gallery.addEventListener("click",(function(e){if(e.preventDefault(),f.trailerButtonRef.addEventListener("click",f.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,g.load("film-current-page").find((e=>e.id===Number(n))));var n;E.modifyDataFilm(t),E.open(),b.btnWatched.addEventListener("click",(function(){b.btnWatched.classList.contains("watched_send")?(b.btnWatched.textContent="REMOVE FROM WATCHED",b.btnWatched.classList.replace("watched_send","watched_remove"),(0,L.sendWatchedToStorage)()):b.btnWatched.classList.contains("watched_remove")&&(b.btnWatched.textContent="ADD TO WATCHED",b.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));b.btnWatched.textContent="ADD TO WATCHED",b.btnWatched.classList.replace("watched_remove","watched_send")})),b.btnQueue.addEventListener("click",(function(){b.btnQueue.classList.contains("queue_send")?(b.btnQueue.textContent="REMOVE FROM QUEUE",b.btnQueue.classList.replace("queue_send","queue_remove"),(0,L.sendQueueToStorage)()):b.btnQueue.classList.contains("queue_remove")&&(b.btnQueue.textContent="ADD TO QUEUE",b.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));b.btnQueue.textContent="ADD TO QUEUE",b.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(b.btnWatched.classList.replace("watched_send","watched_remove"),b.btnWatched.textContent="REMOVE FROM WATCHED"):(b.btnWatched.classList.replace("watched_remove","watched_send"),b.btnWatched.textContent="ADD TO WATCHED")}catch(e){b.btnWatched.classList.replace("watched_remove","watched_send")}}(t),b.btnWatched.classList.contains("watched_remove")?b.btnWatched.textContent="REMOVE FROM WATCHED":b.btnWatched.classList.contains("watched_send")&&(b.btnWatched.textContent="ADD TO WATCHED");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(b.btnQueue.classList.replace("queue_send","queue_remove"),b.btnQueue.textContent="REMOVE FROM QUEUE"):(b.btnQueue.classList.replace("queue_remove","queue_send"),b.btnQueue.textContent="ADD TO QUEUE")}catch(e){b.btnQueue.classList.replace("queue_remove","queue_send")}})(t),b.btnQueue.classList.contains("queue_remove")?b.btnQueue.textContent="REMOVE FROM QUEUE":b.btnWatched.classList.contains("queue_send")&&(b.btnQueue.textContent="ADD TO QUEUE");b.closeBtn.addEventListener("click",p),window.addEventListener("keydown",w)})),b.closeBtn.addEventListener("click",p),window.addEventListener("keydown",w),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&p()})),a("37v9V"),a("7bYU0"),a("jLhJV");
//# sourceMappingURL=index.b57435bc.js.map
