!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("4s6iC"),a("fJh0j");var i=a("bpxeT"),c=a("2TvXO"),o=a("dIxxU"),s=a("4s6iC"),u=a("j1lrD"),d=a("fJh0j"),l=document.querySelector(".js-gallery"),f=document.querySelector(".js-pagination"),v=document.querySelector(".header__warning"),m=document.querySelector(".header__input"),p=document.querySelector(".header__form"),g="",h=1,L=1;function E(e){v.insertAdjacentHTML("beforeend",'<div class="header__warning-message">'.concat(e,"</div>")),setTimeout((function(){v.innerHTML=""}),4e3)}function w(){return(w=e(i)(e(c).mark((function t(n,r){var a,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="",r?(a="".concat(s.API).concat(s.TRENDING,"/").concat(s.MEDIA_TYPE,"/").concat(s.TIME_WINDOW,"?"),a+=new URLSearchParams({api_key:s.KEY,page:n,include_adult:!1})):(a="".concat(s.API,"/search/").concat(s.MEDIA_TYPE,"?"),a+=new URLSearchParams({api_key:s.KEY,language:"en-US",query:m.value.trim().toLowerCase(),page:n,include_adult:!1})),e.next=5,o.default.get(a);case 5:if(200===(i=e.sent).status){e.next=8;break}throw new Error("Service is temporarily unavailable.");case 8:return e.abrupt("return",i.data);case 11:e.prev=11,e.t0=e.catch(0),E(e.t0.message);case 14:case"end":return e.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function _(e,t){(0,u.default)(),setTimeout((function(){return function(e,t){return w.apply(this,arguments)}(e,t).then((function(e){var t=e.page,n=e.results,r=e.total_pages;if((0,d.renderFilmCards)(n,l),(0,d.renderPagination)(t,r,f),!r)throw new Error('Search result "'.concat(g,'" not successful. Enter an another movie name.'))})).catch((function(e){return E(e.message)})).finally((0,u.default)())}),200)}window.addEventListener("load",(function(){_(h,L)})),f.addEventListener("click",(function(e){var t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(h-=1);t.classList.contains("js-pagination__arrow-right")&&(h+=1);t.classList.contains("js-pagination__button")&&(h=Number(t.textContent));_(h,L),(0,d.goUp)()})),p.addEventListener("submit",(function(e){if(L=0,h=1,e.preventDefault(),!(g=e.currentTarget.elements.searchQuery.value.trim().toLowerCase())){E("Search query is empty. Rendering the popular movies."),l.innerHTML="",L=1}_(h,L)})),m.addEventListener("input",(function(e){var t=e.target,n=document.querySelector(".header__btn-clear");function r(){t.value="",n.classList.add("hidden"),n.removeEventListener("click",r)}t.value.length?n.classList.remove("hidden"):(n.classList.add("hidden"),n.removeEventListener("click",r)),n.addEventListener("click",r)}));var y=a("73ES2"),k=a("cDXQO"),T=(d=a("fJh0j"),document.querySelector(".js-gallery")),S=document.querySelector("[data-modal-close]"),b=document.querySelector(".btn__wrapper"),x=new(0,y.default);function D(e){var t=e.target,n=t.nodeName,r=t.name;"BUTTON"===n&&((0,d.changeStore)(r),x.rerenderBtnWrapper())}function q(){x.close(),k.trailerButtonRef.removeEventListener("click",k.handleTrailerButtonClick),window.removeEventListener("keydown",M),document.removeEventListener("click",j),S.removeEventListener("click",q)}function j(e){e.target.classList.contains("backdrop")&&q()}function M(e){"Escape"===e.code&&q()}T.addEventListener("click",(function(e){window.addEventListener("keydown",M),document.addEventListener("click",j),S.addEventListener("click",q);var t=e.target,n=t.id,r=t.nodeName;if(t.name,e.preventDefault(),k.trailerButtonRef.addEventListener("click",k.handleTrailerButtonClick),"IMG"===r){var a=(0,d.getFilmData)(n);x.modifyDataFilm(a),x.open(),b.addEventListener("click",D)}})),a("73ES2"),a("aZhHc"),a("cDXQO"),a("d7VxN"),a("j1lrD"),a("4LMMA")}();
//# sourceMappingURL=index.c5790803.js.map
