!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},c=t.parcelRequired7c6;null==c&&((c=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var c={id:e,exports:{}};return n[e]=c,t.call(c.exports,c,c.exports),c.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=c);var i=c("bpxeT"),r=c("8nrFW"),s=c("2TvXO"),o=c("4LMMA"),u=c("dIxxU"),l=c("4s6iC"),d=c("73ES2"),_=document.querySelector(".header__input");function v(e,t,n){var a=e-1,c=e-2,i=e+1,r=e+2,s="";!e||e>t||(e>1&&(s+='<li class="js-pagination__arrow-left">'.concat("&#8592;","</li>")),e>1&&(s+='<li class="js-pagination__button js-pagination__button-end">1</li>'),e>4&&(s+='<li class="js-pagination__points">...</li>'),e>3&&(s+='<li class="js-pagination__button">'.concat(c,"</li>")),e>2&&(s+='<li class="js-pagination__button">'.concat(a,"</li>")),s+='<li class="js-pagination__button js-pagination__button-current">'.concat(e,"</li>"),e+1<t&&(s+='<li class="js-pagination__button">'.concat(i,"</li>")),e+2<t&&(s+='<li class="js-pagination__button">'.concat(r,"</li>")),e+4<t&&(s+='<li class="js-pagination__points">...</li>'),e<t&&(s+='<li class="js-pagination__button js-pagination__button-end">'.concat(t,"</li>")),e<t&&(s+='<li class="js-pagination__arrow-right">'.concat("&#8594;","</li>")),n.innerHTML=s)}function f(e,t){return m.apply(this,arguments)}function m(){return(m=e(i)(e(s).mark((function t(n,a){var c,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="",a?(c="".concat(l.API).concat(l.TRENDING,"/").concat(l.MEDIA_TYPE,"/").concat(l.TIME_WINDOW,"?"),c+=new URLSearchParams({api_key:l.KEY,page:n,include_adult:!1})):(c="".concat(l.API,"/search/").concat(l.MEDIA_TYPE,"?"),c+=new URLSearchParams({api_key:l.KEY,language:"en-US",query:_.value.trim().toLowerCase(),page:n,include_adult:!1})),e.next=5,u.default.get(c);case 5:if(200===(i=e.sent).status){e.next=8;break}throw new Error(i.status);case 8:return e.abrupt("return",i.data);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function p(t,n){var a=t.map((function(e){var t=e.id,n=e.poster_path,a=e.genre_ids,c=e.title,i=e.release_date,r=(0,d.getGenre)(a),s=i?i.substring(0,4):"";r&&s&&(r+=" | "),c||(c="no information");var o=n?l.IMG_PATH+l.SMALL_SIZE+n:l.NO_IMAGE;return'\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="'.concat(o,'"\n              alt="').concat(c,'"\n              id="').concat(t,'"\n            />\n            <h3 class="film-card__film-name">').concat(c,'</h3>\n            <p class="film-card__genre">').concat(r).concat(s,"</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t")})).join("");n.innerHTML=a,o.save("film-current-page",e(r)(t))}c("4s6iC"),c("4LMMA");var h=document.querySelector(".js-gallery"),g=document.querySelector(".js-pagination"),b=document.querySelector(".header__warning"),L=document.querySelector(".header__input"),E=document.querySelector(".header__form"),w=1,T=1;function M(){b.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((function(){b.innerHTML=""}),4e3),h.innerHTML="",f(w=1,T=1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;p(n,h),v(t,a,g)})).catch((function(){b.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){b.innerHTML=""}),4e3)}))}window.addEventListener("load",(function(){h.innerHTML="",f(w=1,T=1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;p(n,h),v(t,a,g)})).catch((function(e){b.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){b.innerHTML=""}),4e3)}))})),g.addEventListener("click",(function(e){var t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(w-=1);t.classList.contains("js-pagination__arrow-right")&&(w+=1);t.classList.contains("js-pagination__button")&&(w=Number(t.textContent));f(w,T).then((function(e){var t=e.page,n=e.results,a=e.total_pages;p(n,h),v(t,a,g)})).catch((function(){b.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){b.innerHTML=""}),4e3)}))})),E.addEventListener("submit",(function(e){T=0,w=1,e.preventDefault(),e.currentTarget.elements.searchQuery.value.trim().toLowerCase()?f(w,T).then((function(e){var t=e.page,n=e.results,a=e.total_pages;a?(p(n,h),v(t,a,g)):M()})).catch((function(e){b.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){b.innerHTML=""}),4e3)})):M()})),L.addEventListener("input",(function(e){var t=e.target,n=document.querySelector(".header__btn-clear");function a(e){t.value="",n.classList.add("hidden"),n.removeEventListener("click",a)}t.value.length?n.classList.remove("hidden"):(n.classList.add("hidden"),n.removeEventListener("click",a)),n.addEventListener("click",a)}));o=c("4LMMA"),d=c("73ES2");var y=c("cDXQO"),S=c("iDjs5"),D={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},O=new(0,d.default);function W(){var e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,y.handleBackButtonClick)(e,t),O.close(),D.closeBtn.removeEventListener("click",W),y.trailerButtonRef.removeEventListener("click",y.handleTrailerButtonClick),window.removeEventListener("keydown",q)}function q(e){"Escape"===e.code&&(O.close(),D.closeBtn.removeEventListener("click",W),window.removeEventListener("keydown",q))}D.gallery.addEventListener("click",(function(e){if(e.preventDefault(),y.trailerButtonRef.addEventListener("click",y.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;var t=(n=e.target.id,o.load("film-current-page").find((function(e){return e.id===Number(n)})));var n;O.modifyDataFilm(t),O.open(),D.btnWatched.addEventListener("click",(function(){D.btnWatched.classList.contains("watched_send")?(D.btnWatched.textContent="REMOVE FROM WATCHED",D.btnWatched.classList.replace("watched_send","watched_remove"),(0,S.sendWatchedToStorage)()):D.btnWatched.classList.contains("watched_remove")&&(D.btnWatched.textContent="ADD TO WATCHED",D.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{var t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));D.btnWatched.textContent="ADD TO WATCHED",D.btnWatched.classList.replace("watched_remove","watched_send")})),D.btnQueue.addEventListener("click",(function(){D.btnQueue.classList.contains("queue_send")?(D.btnQueue.textContent="REMOVE FROM QUEUE",D.btnQueue.classList.replace("queue_send","queue_remove"),(0,S.sendQueueToStorage)()):D.btnQueue.classList.contains("queue_remove")&&(D.btnQueue.textContent="ADD TO QUEUE",D.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{var t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));D.btnQueue.textContent="ADD TO QUEUE",D.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{var t=localStorage.getItem("WatchedMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(D.btnWatched.classList.replace("watched_send","watched_remove"),D.btnWatched.textContent="REMOVE FROM WATCHED"):(D.btnWatched.classList.replace("watched_remove","watched_send"),D.btnWatched.textContent="ADD TO WATCHED")}catch(e){D.btnWatched.classList.replace("watched_remove","watched_send")}}(t),D.btnWatched.classList.contains("watched_remove")?D.btnWatched.textContent="REMOVE FROM WATCHED":D.btnWatched.classList.contains("watched_send")&&(D.btnWatched.textContent="ADD TO WATCHED");(function(e){try{var t=localStorage.getItem("QueueMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(D.btnQueue.classList.replace("queue_send","queue_remove"),D.btnQueue.textContent="REMOVE FROM QUEUE"):(D.btnQueue.classList.replace("queue_remove","queue_send"),D.btnQueue.textContent="ADD TO QUEUE")}catch(e){D.btnQueue.classList.replace("queue_remove","queue_send")}})(t),D.btnQueue.classList.contains("queue_remove")?D.btnQueue.textContent="REMOVE FROM QUEUE":D.btnWatched.classList.contains("queue_send")&&(D.btnQueue.textContent="ADD TO QUEUE");D.closeBtn.addEventListener("click",W),window.addEventListener("keydown",q)})),D.closeBtn.addEventListener("click",W),window.addEventListener("keydown",q),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&W()})),c("cDXQO"),c("aZhHc"),c("d7VxN")}();
//# sourceMappingURL=index.86b17d06.js.map
