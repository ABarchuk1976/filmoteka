{"mappings":"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","sources":["src/library.js","src/js/header-library.js","src/js/open-modal-library.js"],"sourcesContent":["import './js/constants.js';\nimport './js/common.js';\nimport './js/header-library.js';\nimport './js/open-modal-library.js';\nimport './js/modal-film.js';\nimport './js/modal-team.js';\nimport './js/trailer.js';\nimport './js/btn-scroll.js';\nimport './js/spinner.js';\n","import { renderPagination, renderFilmCards, goUp } from './common.js';\nimport { KEY_QUEUE, KEY_WATCHED } from './constants.js';\n\nconst PER_PAGE = 6;\n\nlet allData = [];\nlet currentPage = 1;\n// 1 - do queue, 0 - do watched\nlet currentProcess = 1;\n\nconst queueRef = document.querySelector('.filter__item-queue');\nconst watchedRef = document.querySelector('.filter__item-watched');\nconst listRef = document.querySelector('.filter__list');\nconst pagLibraryRef = document.querySelector('.js-pagination-library');\nconst emptyRef = document.querySelector('.empty-list');\nconst emptyTitleRef = document.querySelector('.empty-title');\nconst galleryLibrary = document.querySelector('.js-gallery-library');\n\nwindow.addEventListener('load', () => {\n  queueRef.click();\n});\n\nlistRef.addEventListener('click', onBtnClick);\n\nfunction onBtnClick(evt) {\n  const { name, tagName } = evt.target;\n\n  console.log('on Li Click: ', evt.target.name);\n  if (tagName !== 'BUTTON') return;\n\n  const key = name;\n\n  currentPage = 1;\n\n  console.log(paginateAllData(key));\n\n  switch (key) {\n    case KEY_QUEUE:\n      queueRef.classList.add('active');\n      watchedRef.classList.remove('active');\n      break;\n    case KEY_WATCHED:\n      watchedRef.classList.add('active');\n      queueRef.classList.remove('active');\n      break;\n  }\n\n  emptyRef.classList.add('is-hidden');\n\n  try {\n    allData = [...paginateAllData(key)];\n\n    console.log(allData);\n\n    if (!allData || !allData.length) {\n      emptyRef.classList.remove('is-hidden');\n      emptyTitleRef.textContent = 'Your film list is empty.';\n      return;\n    }\n\n    renderFilmCards(allData[currentPage - 1], galleryLibrary);\n    renderPagination(currentPage, allData.length, pagLibraryRef);\n  } catch (error) {\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = 'Something went wrong.';\n  }\n}\n\nfunction paginateAllData(key) {\n  try {\n    let filmStorage = localStorage.getItem(key);\n\n    console.log('In Pagination All: ', filmStorage);\n\n    if (filmStorage) {\n      filmStorage = JSON.parse(filmStorage);\n\n      const allStorageDataByPages = [];\n      for (let i = 0; i < filmStorage.length; i += PER_PAGE) {\n        let end =\n          i + PER_PAGE < filmStorage.length ? i + PER_PAGE : filmStorage.length;\n        allStorageDataByPages.push(filmStorage.slice(i, end));\n      }\n      console.log(allStorageDataByPages);\n      return allStorageDataByPages;\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\npagLibraryRef.addEventListener('click', onClickPagination);\n\nfunction onClickPagination(evt) {\n  const target = evt.target;\n\n  if (target.textContent === '...' || target.tagName !== 'LI') return;\n\n  if (target.classList.contains('js-pagination__arrow-left')) currentPage -= 1;\n\n  if (target.classList.contains('js-pagination__arrow-right')) currentPage += 1;\n\n  if (target.classList.contains('js-pagination__button'))\n    currentPage = Number(target.textContent);\n\n  try {\n    renderFilmCards(allData[currentPage - 1], galleryLibrary);\n    renderPagination(currentPage, allData.length, pagLibraryRef);\n\n    emptyRef.classList.add('is-hidden');\n  } catch (error) {\n    emptyRef.classList.remove('is-hidden');\n    emptyTitleRef.textContent = error.message;\n  }\n\n  goUp();\n}\n","import { setStore, getStore, removeStore } from './local-storage.js';\nimport ModalFilm from './modal-film.js';\nimport { changeStore, getFilmData } from './common.js';\n\nconst gallery = document.querySelector('.js-gallery-library');\nconst closeBtn = document.querySelector('[data-modal-close]');\nconst btnWrapperRef = document.querySelector('.btn__wrapper');\n// const btnWatched = document.querySelector('.btn_watched');\n// const btnQueue = document.querySelector('.btn_queue');\nconst activeLibraryBtn = document.querySelector(\n  '.filter__item>.filter__button--active'\n);\n\nconst modalFilm = new ModalFilm();\n\ngallery.addEventListener('click', onOpenModal);\ncloseBtn.addEventListener('click', onCloseModal);\nwindow.addEventListener('keydown', onCloseModalEsc);\ndocument.addEventListener('click', onOverlayClose);\n\nfunction onOpenModal(evt) {\n  const { id, nodeName, name } = evt.target;\n\n  evt.preventDefault();\n  if (nodeName !== 'IMG') return;\n\n  const dataCurrentFilm = getFilmData(id);\n\n  modalFilm.modifyDataFilm(dataCurrentFilm);\n  modalFilm.open();\n\n  btnWrapperRef.addEventListener('click', onBtnClick);\n}\n\nfunction onBtnClick(evt) {\n  const { nodeName, name: key } = evt.target;\n  if (nodeName !== 'BUTTON') return;\n  changeStore(key);\n  modalFilm.rerenderBtnWrapper();\n}\n\ncloseBtn.addEventListener('click', onCloseModal);\nwindow.addEventListener('keydown', onCloseModalEsc);\n\nfunction onCloseModal() {\n  modalFilm.close();\n\n  closeBtn.removeEventListener('click', onCloseModal);\n  window.removeEventListener('keydown', onCloseModalEsc);\n\n  window.location.reload();\n}\n\nfunction onCloseModalEsc(e) {\n  if (e.code === 'Escape') {\n    modalFilm.close();\n\n    closeBtn.removeEventListener('click', onCloseModal);\n    window.removeEventListener('keydown', onCloseModalEsc);\n  }\n}\n\nfunction onOverlayClose(e) {\n  // e.preventDefault();\n\n  if (!e.target.closest('.modal') && e.target.closest('.backdrop')) {\n    onCloseModal();\n  }\n}\n///////////// checks for button /////////////////\n\nfunction checkWatchedStorage(currentFilm) {\n  try {\n    const getWatchedFromStorage = localStorage.getItem(KEY_WATCHED);\n    const getWatchedArray = JSON.parse(getWatchedFromStorage);\n    const checkWatchedStorage = getWatchedArray.find(\n      option => option.id === currentFilm.id\n    );\n    if (checkWatchedStorage) {\n      btnWatched.classList.replace('watched_send', 'watched_remove');\n      btnWatched.textContent = 'REMOVE FROM WATCHED';\n    } else {\n      btnWatched.classList.replace('watched_remove', 'watched_send');\n      btnWatched.textContent = 'ADD TO WATCHED';\n    }\n  } catch (error) {\n    // console.error('Get state error: ', error.message);\n    btnWatched.classList.replace('watched_remove', 'watched_send');\n  }\n}\n\nfunction checkQueueStorage(currentFilm) {\n  try {\n    const getQueueFromStorage = localStorage.getItem(KEY_QUEUE);\n    const getQueueArray = JSON.parse(getQueueFromStorage);\n    const checkQueueStorage = getQueueArray.find(\n      option => option.id === currentFilm.id\n    );\n    if (checkQueueStorage) {\n      btnQueue.classList.replace('queue_send', 'queue_remove');\n      btnQueue.textContent = 'REMOVE FROM QUEUE';\n    } else {\n      btnQueue.classList.replace('queue_remove', 'queue_send');\n      btnQueue.textContent = 'ADD TO QUEUE';\n    }\n  } catch (error) {\n    // console.error('Get state error: ', error.message);\n    btnQueue.classList.replace('queue_remove', 'queue_send');\n  }\n}\n"],"names":["parcelRequire","$8nrFW","$cb53717e68f10b0d$var$allData","$cb53717e68f10b0d$var$currentPage","$cb53717e68f10b0d$var$queueRef","document","querySelector","$cb53717e68f10b0d$var$watchedRef","$cb53717e68f10b0d$var$listRef","$cb53717e68f10b0d$var$pagLibraryRef","$cb53717e68f10b0d$var$emptyRef","$cb53717e68f10b0d$var$emptyTitleRef","$cb53717e68f10b0d$var$galleryLibrary","$cb53717e68f10b0d$var$paginateAllData","key","filmStorage","localStorage","getItem","console","log","JSON","parse","allStorageDataByPages","i","length","end","push","slice","error","message","window","addEventListener","click","evt","_target","target","name","tagName","$4s6iC","KEY_QUEUE","classList","add","remove","KEY_WATCHED","$parcel$interopDefault","textContent","$fJh0j","renderFilmCards","renderPagination","contains","Number","goUp","$572566355069554e$var$gallery","$572566355069554e$var$closeBtn","$572566355069554e$var$btnWrapperRef","$572566355069554e$var$modalFilm","$73ES2","default","$572566355069554e$var$onBtnClick","nodeName","changeStore","rerenderBtnWrapper","$572566355069554e$var$onCloseModal","close","removeEventListener","$572566355069554e$var$onCloseModalEsc","location","reload","e","code","id","preventDefault","dataCurrentFilm","getFilmData","modifyDataFilm","open","closest"],"version":3,"file":"library.99c46470.js.map"}