{"mappings":"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","sources":["src/library.js","src/js/open-modal-library.js"],"sourcesContent":["import './js/modal-team';\nimport './js/btn-scroll';\nimport './js/watched';\nimport './js/queue';\nimport './js/local-storage-set';\nimport './js/trailer';\nimport './js/open-modal-library';\n","import * as storageLocal from './local-storage.js';\nimport ModalFilm from './modal-film.js';\nimport { sendWatchedToStorage, sendQueueToStorage} from \"./local-storage-set\";\nimport {onBtnQueueClick} from './queue.js';\nimport {onBtnWatchedClick} from './watched.js';\nconst refs = {\n  gallery: document.querySelector('.js-gallery'),\n  closeBtn: document.querySelector('[data-modal-close]'),\n  btnWatched: document.querySelector(\".btn_watched\"),\n  btnQueue: document.querySelector(\".btn_queue\"),\n  activLibraryBtn: document.querySelector(\n    '.filter__item>.filter__button--active'\n  ),\n};\n// console.log(refs.activLibraryBtn.textContent);\nconst modalFilm = new ModalFilm();\n\nrefs.gallery.addEventListener('click', onOpenModal);\nrefs.closeBtn.addEventListener('click', onCloseModal);\nwindow.addEventListener('keydown', onCloseModalEsc);\ndocument.addEventListener('click', onOverlayClose);\n\nfunction onOpenModal(e) {\n  e.preventDefault();\n\n  if (e.target.nodeName !== 'IMG') return;\n\n  const dataCurentFilm = getFilmData(e.target.id);\n\n  modalFilm.modifyDataFilm(dataCurentFilm);\n  modalFilm.open();\n\n///// for local-storage and button /////////\nrefs.btnWatched.addEventListener(\"click\", onWatchedBtnClick)\nrefs.btnQueue.addEventListener(\"click\", onQueueBtnClick)\n\nlocalStorage.setItem(\"CurrentFilm\", JSON.stringify(dataCurentFilm))\n\ncheckWatchedStorage(dataCurentFilm)\nif (refs.btnWatched.classList.contains(\"watched_remove\")) {\n  refs.btnWatched.textContent = 'REMOVE FROM WATCHED'} \nelse if(refs.btnWatched.classList.contains(\"watched_send\")){\n  refs.btnWatched.textContent = 'ADD TO WATCHED'\n}\n\ncheckQueueStorage(dataCurentFilm)\nif (refs.btnQueue.classList.contains(\"queue_remove\")) {\n    refs.btnQueue.textContent = 'REMOVE FROM QUEUE'}\nelse if (refs.btnWatched.classList.contains(\"queue_send\")){\n  refs.btnQueue.textContent = 'ADD TO QUEUE'\n}\n  \nfunction onWatchedBtnClick() {\n  if (refs.btnWatched.classList.contains(\"watched_send\")) {\n    refs.btnWatched.textContent = 'REMOVE FROM WATCHED'\n    refs.btnWatched.classList.replace(\"watched_send\", \"watched_remove\")\n\n    sendWatchedToStorage()\n\n  } else if (refs.btnWatched.classList.contains(\"watched_remove\")) {\n    refs.btnWatched.textContent = 'ADD TO WATCHED'  \n    refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n\n    removeWatchedFilm(dataCurentFilm)\n  }\n    \n  refs.btnWatched.textContent = 'ADD TO WATCHED' \n  refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")  \n}\n\nfunction removeWatchedFilm(currentFilm) {\n    try {\n      const getWatchedFromStorage = localStorage.getItem(\"WatchedMovies\")\n      const getWatchedArray = JSON.parse(getWatchedFromStorage)\n\n      const watchedFilmIndex = getWatchedArray.findIndex(value => value.id === currentFilm.id);\n      getWatchedArray.splice(watchedFilmIndex, 1)\n      localStorage.setItem(\"WatchedMovies\", JSON.stringify(getWatchedArray))\n    } catch (error) {\n    // console.error('Get state error: ', error.message);\n  }\n}\n\nfunction onQueueBtnClick() {\n  if (refs.btnQueue.classList.contains(\"queue_send\")) {\n    refs.btnQueue.textContent = 'REMOVE FROM QUEUE'\n    refs.btnQueue.classList.replace(\"queue_send\", \"queue_remove\")\n\n    sendQueueToStorage()\n  } else if (refs.btnQueue.classList.contains(\"queue_remove\")) {\n    refs.btnQueue.textContent = 'ADD TO QUEUE'  \n    refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n\n    removeQueueFilm(dataCurentFilm)\n  }\n\n  refs.btnQueue.textContent = 'ADD TO QUEUE'  \n  refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n}\n\nfunction removeQueueFilm(currentFilm) {\n    try {\n      const getQueueFromStorage = localStorage.getItem(\"QueueMovies\")\n      const getQueueArray = JSON.parse(getQueueFromStorage)\n\n      const queueFilmIndex = getQueueArray.findIndex(value => value.id === currentFilm.id);\n      getQueueArray.splice(queueFilmIndex, 1)\n      localStorage.setItem(\"QueueMovies\", JSON.stringify(getQueueArray))\n\n  } catch (error) {\n    // console.error('Get state error: ', error.message);\n  }\n}\n///////////////////end of local-storage ///////////\n\n  refs.closeBtn.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onCloseModalEsc);\n}\n\nfunction onCloseModal() {\n  modalFilm.close();\n\n  refs.closeBtn.removeEventListener('click', onCloseModal);\n  window.removeEventListener('keydown', onCloseModalEsc);\n\n    window.location.reload()\n}\n\nfunction onCloseModalEsc(e) {\n  if (e.code === 'Escape') {\n    modalFilm.close();\n\n    refs.closeBtn.removeEventListener('click', onCloseModal);\n    window.removeEventListener('keydown', onCloseModalEsc);\n  }\n}\n\nfunction getFilmData(filmId) {\n  const filmList = storageLocal.load('QueueMovies').concat(storageLocal.load('WatchedMovies'));\n  return filmList.find(film => film.id === Number(filmId));\n}\n\nfunction onOverlayClose(e) {\n  // e.preventDefault();\n\n  if (!e.target.closest('.modal') && e.target.closest('.backdrop')) {\n    onCloseModal();\n  }\n}\n///////////// checks for button /////////////////\n\nfunction checkWatchedStorage(currentFilm) {\n  try {\n    const getWatchedFromStorage = localStorage.getItem(\"WatchedMovies\")\n    const getWatchedArray = JSON.parse(getWatchedFromStorage)\n    const checkWatchedStorage = getWatchedArray.find(option => option.id === currentFilm.id);\n        if (checkWatchedStorage) {\n          refs.btnWatched.classList.replace(\"watched_send\", \"watched_remove\")\n          refs.btnWatched.textContent = 'REMOVE FROM WATCHED'\n        } else {\n          refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n          refs.btnWatched.textContent = 'ADD TO WATCHED'\n        }\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n      refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n    }\n}\n\nfunction checkQueueStorage(currentFilm) {\n  try {\n    const getQueueFromStorage = localStorage.getItem(\"QueueMovies\")\n    const getQueueArray = JSON.parse(getQueueFromStorage)\n    const checkQueueStorage = getQueueArray.find(option => option.id === currentFilm.id);\n        if (checkQueueStorage) {\n          refs.btnQueue.classList.replace(\"queue_send\", \"queue_remove\")\n          refs.btnQueue.textContent = 'REMOVE FROM QUEUE'\n        } else {\n          refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n          refs.btnQueue.textContent = 'ADD TO QUEUE'\n   \n\n        }\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n      refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n    }\n}"],"names":["parcelRequire","$4LMMA","$572566355069554e$var$refs","gallery","document","querySelector","closeBtn","btnWatched","btnQueue","activLibraryBtn","$572566355069554e$var$modalFilm","$73ES2","default","$572566355069554e$var$onCloseModal","close","removeEventListener","window","$572566355069554e$var$onCloseModalEsc","location","reload","e","code","addEventListener","preventDefault","target","nodeName","dataCurentFilm","filmId","id","load","concat","find","film","Number","modifyDataFilm","open","classList","contains","textContent","replace","$iDjs5","sendWatchedToStorage","currentFilm","getWatchedFromStorage","localStorage","getItem","getWatchedArray","JSON","parse","watchedFilmIndex","findIndex","value","splice","setItem","stringify","error","removeWatchedFilm","sendQueueToStorage","getQueueFromStorage","getQueueArray","queueFilmIndex","removeQueueFilm","option","$572566355069554e$var$checkWatchedStorage","$572566355069554e$var$checkQueueStorage","closest"],"version":3,"file":"library.1878ae8d.js.map"}