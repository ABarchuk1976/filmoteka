!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},c=t.parcelRequired7c6;null==c&&((c=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var c={id:e,exports:{}};return n[e]=c,t.call(c.exports,c,c.exports),c.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=c);var i=c("4LMMA"),r=c("73ES2"),s=c("cDXQO"),o=c("iDjs5"),u={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},l=new(0,r.default);function d(){var e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,s.handleBackButtonClick)(e,t),l.close(),u.closeBtn.removeEventListener("click",d),s.trailerButtonRef.removeEventListener("click",s.handleTrailerButtonClick),window.removeEventListener("keydown",_)}function _(e){"Escape"===e.code&&(l.close(),u.closeBtn.removeEventListener("click",d),window.removeEventListener("keydown",_))}u.gallery.addEventListener("click",(function(e){if(e.preventDefault(),s.trailerButtonRef.addEventListener("click",s.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;var t=(n=e.target.id,i.load("film-current-page").find((function(e){return e.id===Number(n)})));var n;l.modifyDataFilm(t),l.open(),u.btnWatched.addEventListener("click",(function(){u.btnWatched.classList.contains("watched_send")?(u.btnWatched.textContent="REMOVE FROM WATCHED",u.btnWatched.classList.replace("watched_send","watched_remove"),(0,o.sendWatchedToStorage)()):u.btnWatched.classList.contains("watched_remove")&&(u.btnWatched.textContent="ADD TO WATCHED",u.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{var t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));u.btnWatched.textContent="ADD TO WATCHED",u.btnWatched.classList.replace("watched_remove","watched_send")})),u.btnQueue.addEventListener("click",(function(){u.btnQueue.classList.contains("queue_send")?(u.btnQueue.textContent="REMOVE FROM QUEUE",u.btnQueue.classList.replace("queue_send","queue_remove"),(0,o.sendQueueToStorage)()):u.btnQueue.classList.contains("queue_remove")&&(u.btnQueue.textContent="ADD TO QUEUE",u.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{var t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));u.btnQueue.textContent="ADD TO QUEUE",u.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{var t=localStorage.getItem("WatchedMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(u.btnWatched.classList.replace("watched_send","watched_remove"),u.btnWatched.textContent="REMOVE FROM WATCHED"):(u.btnWatched.classList.replace("watched_remove","watched_send"),u.btnWatched.textContent="ADD TO WATCHED")}catch(e){u.btnWatched.classList.replace("watched_remove","watched_send")}}(t),u.btnWatched.classList.contains("watched_remove")?u.btnWatched.textContent="REMOVE FROM WATCHED":u.btnWatched.classList.contains("watched_send")&&(u.btnWatched.textContent="ADD TO WATCHED");(function(e){try{var t=localStorage.getItem("QueueMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(u.btnQueue.classList.replace("queue_send","queue_remove"),u.btnQueue.textContent="REMOVE FROM QUEUE"):(u.btnQueue.classList.replace("queue_remove","queue_send"),u.btnQueue.textContent="ADD TO QUEUE")}catch(e){u.btnQueue.classList.replace("queue_remove","queue_send")}})(t),u.btnQueue.classList.contains("queue_remove")?u.btnQueue.textContent="REMOVE FROM QUEUE":u.btnWatched.classList.contains("queue_send")&&(u.btnQueue.textContent="ADD TO QUEUE");u.closeBtn.addEventListener("click",d),window.addEventListener("keydown",_)})),u.closeBtn.addEventListener("click",d),window.addEventListener("keydown",_),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&d()})),c("cDXQO"),c("aZhHc"),c("d7VxN");var v=c("bpxeT"),f=c("8nrFW"),m=c("2TvXO"),p=(i=c("4LMMA"),c("dIxxU")),h=c("4s6iC"),g=(r=c("73ES2"),document.querySelector(".header__input"));function b(e,t,n){var a=e-1,c=e-2,i=e+1,r=e+2,s="";!e||e>t||(e>1&&(s+='<li class="js-pagination__arrow-left">'.concat("&#8592;","</li>")),e>1&&(s+='<li class="js-pagination__button js-pagination__button-end">1</li>'),e>4&&(s+='<li class="js-pagination__points">...</li>'),e>3&&(s+='<li class="js-pagination__button">'.concat(c,"</li>")),e>2&&(s+='<li class="js-pagination__button">'.concat(a,"</li>")),s+='<li class="js-pagination__button js-pagination__button-current">'.concat(e,"</li>"),e+1<t&&(s+='<li class="js-pagination__button">'.concat(i,"</li>")),e+2<t&&(s+='<li class="js-pagination__button">'.concat(r,"</li>")),e+4<t&&(s+='<li class="js-pagination__points">...</li>'),e<t&&(s+='<li class="js-pagination__button js-pagination__button-end">'.concat(t,"</li>")),e<t&&(s+='<li class="js-pagination__arrow-right">'.concat("&#8594;","</li>")),n.innerHTML=s)}function E(e,t){return L.apply(this,arguments)}function L(){return(L=e(v)(e(m).mark((function t(n,a){var c,i;return e(m).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="",a?(c="".concat(h.API).concat(h.TRENDING,"/").concat(h.MEDIA_TYPE,"/").concat(h.TIME_WINDOW,"?"),c+=new URLSearchParams({api_key:h.KEY,page:n,include_adult:!1})):(c="".concat(h.API,"/search/").concat(h.MEDIA_TYPE,"?"),c+=new URLSearchParams({api_key:h.KEY,language:"en-US",query:g.value.trim().toLowerCase(),page:n,include_adult:!1})),e.next=5,p.default.get(c);case 5:if(200===(i=e.sent).status){e.next=8;break}throw new Error(i.status);case 8:return e.abrupt("return",i.data);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function w(t,n){var a=t.map((function(e){var t=e.id,n=e.poster_path,a=e.genre_ids,c=e.title,i=e.release_date,s=(0,r.getGenre)(a),o=i?i.substring(0,4):"";s&&o&&(s+=" | "),c||(c="no information");var u=n?h.IMG_PATH+h.SMALL_SIZE+n:h.NO_IMAGE;return'\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="'.concat(u,'"\n              alt="').concat(c,'"\n              id="').concat(t,'"\n            />\n            <h3 class="film-card__film-name">').concat(c,'</h3>\n            <p class="film-card__genre">').concat(s).concat(o,"</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t")})).join("");n.innerHTML=a,i.save("film-current-page",e(f)(t))}c("4s6iC"),c("4LMMA");var T=document.querySelector(".js-gallery"),M=document.querySelector(".js-pagination"),y=document.querySelector(".header__warning"),S=document.querySelector(".header__input"),D=document.querySelector(".header__form"),O=1,W=1;function q(){y.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((function(){y.innerHTML=""}),4e3),T.innerHTML="",E(O=1,W=1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;w(n,T),b(t,a,M)})).catch((function(){y.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){y.innerHTML=""}),4e3)}))}window.addEventListener("load",(function(){T.innerHTML="",E(O=1,W=1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;w(n,T),b(t,a,M)})).catch((function(e){y.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){y.innerHTML=""}),4e3)}))})),M.addEventListener("click",(function(e){var t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(O-=1);t.classList.contains("js-pagination__arrow-right")&&(O+=1);t.classList.contains("js-pagination__button")&&(O=Number(t.textContent));E(O,W).then((function(e){var t=e.page,n=e.results,a=e.total_pages;w(n,T),b(t,a,M)})).catch((function(){y.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){y.innerHTML=""}),4e3)}))})),D.addEventListener("submit",(function(e){W=0,O=1,e.preventDefault(),e.currentTarget.elements.searchQuery.value.trim().toLowerCase()?E(O,W).then((function(e){var t=e.page,n=e.results,a=e.total_pages;a?(w(n,T),b(t,a,M)):q()})).catch((function(e){y.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){y.innerHTML=""}),4e3)})):q()})),S.addEventListener("input",(function(e){var t=e.target,n=document.querySelector(".header__btn-clear");t.value.length&&n.classList.remove("hidden"),n.addEventListener("click",(function e(a){t.value="",n.classList.add("hidden"),n.removeEventListener("click",e)}))})),c("hsiym")}();
//# sourceMappingURL=index.59b5bdb5.js.map
