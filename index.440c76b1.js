!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a("4s6iC"),a("fJh0j");var i=a("bpxeT"),o=a("2TvXO"),c=a("dIxxU"),d=a("4s6iC"),l=a("j1lrD"),s=a("fJh0j"),u=document.querySelector(".js-gallery"),f=document.querySelector(".js-pagination"),v=document.querySelector(".header__warning"),m=document.querySelector(".header__input"),p=document.querySelector(".header__form"),g="",h=1,w=1;function L(e){v.insertAdjacentHTML("beforeend",'<div class="header__warning-message">'.concat(e,"</div>")),setTimeout((function(){v.innerHTML=""}),4e3)}function E(){return(E=e(i)(e(o).mark((function t(n,r){var a,i;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="",r?(a="".concat(d.API).concat(d.TRENDING,"/").concat(d.MEDIA_TYPE,"/").concat(d.TIME_WINDOW,"?"),a+=new URLSearchParams({api_key:d.KEY,page:n,include_adult:!1})):(a="".concat(d.API,"/search/").concat(d.MEDIA_TYPE,"?"),a+=new URLSearchParams({api_key:d.KEY,language:"en-US",query:m.value.trim().toLowerCase(),page:n,include_adult:!1})),e.next=5,c.default.get(a);case 5:if(200===(i=e.sent).status){e.next=8;break}throw new Error("Service is temporarily unavailable.");case 8:return e.abrupt("return",i.data);case 11:e.prev=11,e.t0=e.catch(0),L(e.t0.message);case 14:case"end":return e.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function y(e,t){(0,l.default)(),setTimeout((function(){return function(e,t){return E.apply(this,arguments)}(e,t).then((function(e){var t=e.page,n=e.results,r=e.total_pages;if((0,s.renderFilmCards)(n,u),(0,s.renderPagination)(t,r,f),!r)throw new Error('Search result "'.concat(g,'" not successful. Enter an another movie name.'))})).catch((function(e){return L(e.message)})).finally((0,l.default)())}),200)}window.addEventListener("load",(function(){y(h,w)})),f.addEventListener("click",(function(e){var t=e.target;if("..."===t.textContent||"LI"!==t.tagName)return;t.classList.contains("js-pagination__arrow-left")&&(h-=1);t.classList.contains("js-pagination__arrow-right")&&(h+=1);t.classList.contains("js-pagination__button")&&(h=Number(t.textContent));y(h,w),(0,s.goUp)()})),p.addEventListener("submit",(function(e){if(w=0,h=1,e.preventDefault(),!(g=e.currentTarget.elements.searchQuery.value.trim().toLowerCase())){L("Search query is empty. Rendering the popular movies."),u.innerHTML="",w=1}y(h,w)})),m.addEventListener("input",(function(e){var t=e.target,n=document.querySelector(".header__btn-clear");function r(){t.value="",n.classList.add("hidden"),n.removeEventListener("click",r)}t.value.length?n.classList.remove("hidden"):(n.classList.add("hidden"),n.removeEventListener("click",r)),n.addEventListener("click",r)})),a("4LMMA");var _=a("73ES2"),k=a("cDXQO"),S=(s=a("fJh0j"),document.querySelector(".js-gallery")),T=document.querySelector("[data-modal-close]"),b=document.querySelector(".btn__wrapper"),q=new(0,_.default);function x(e){var t=e.target,n=t.nodeName,r=t.name;"BUTTON"===n&&((0,s.changeStore)(r),q.rerenderBtnWrapper())}function D(){var e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,k.handleBackButtonClick)(e,t),q.close(),T.removeEventListener("click",D),k.trailerButtonRef.removeEventListener("click",k.handleTrailerButtonClick),window.removeEventListener("keydown",M)}function M(e){"Escape"===e.code&&(q.close(),T.removeEventListener("click",D),window.removeEventListener("keydown",M))}S.addEventListener("click",(function(e){var t=e.target,n=t.id,r=t.nodeName;t.name;if(e.preventDefault(),k.trailerButtonRef.addEventListener("click",k.handleTrailerButtonClick),"IMG"!==r)return;var a=(0,s.getFilmData)(n);q.modifyDataFilm(a),q.open(),b.addEventListener("click",x)})),T.addEventListener("click",D),window.addEventListener("keydown",M),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&D()})),T.addEventListener("click",D),window.addEventListener("keydown",M),a("73ES2"),a("aZhHc"),a("cDXQO"),a("d7VxN"),a("j1lrD"),a("4LMMA")}();
//# sourceMappingURL=index.440c76b1.js.map
